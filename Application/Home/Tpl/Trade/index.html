<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="keywords" content="{$web_keywords}" />
    <meta name="format-detection" content="telephone=no,email=no,address=no">
    <eq name="Think.session.lang" value="1">
									<notempty name="coninfo['web_name']" value=" ">
								
										<title>{$coninfo['web_name']}</title>
									</notempty>
								</eq>
								<eq name="Think.session.lang" value="2">
									<notempty name="coninfo['web_name_e']" value=" ">
										<title>{$coninfo['web_name_e']}</title>
									</notempty>
								</eq>
								<eq name="Think.session.lang" value="3">
									<notempty name="coninfo['web_name_en']" value=" ">
										<title>{$coninfo['web_name_en']}</title>
									</notempty>
								</eq>
    <link href="__PUBLIC__/favicon.ico" rel="icon" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Home/css/newcss/base.css">
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Home/css/newcss/common.css">
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Home/css/newcss/coinTrade.css" media="all">
  	<script type="text/javascript" src="__PUBLIC__/Home/charting_library/charting_library.min.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Home/datafeeds/udf/dist/polyfills.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Home/datafeeds/udf/dist/bundle.js"></script>
    <script src="__PUBLIC__/Home/js/newjs/jquery-3.3.1.min.js"></script>
    
    <style>
        .product-info .product-info-top .item span{
            color:#fff;
        }
        .product-list .nav.optional .active span{
            background: url("/Public/Home/image/borrowMoney/startSelected.png");
        }
        .product-info.hide{
            height: 68px;
        }
        .contract-entrust.hide,.contract-deep.hide,.coin-introduction.hide,.contract-history.hide,.contract-my-entrust.hide{
            height: 40px;
        }
        .contract-entrust .list table tbody tr .rectangle {
            position: relative;
            height: 20px;
            display: -ms-flexbox;
            display: flex;
            -ms-flex-direction: row-reverse;
            flex-direction: row-reverse;
        }
        /*委托交易列表*/
        .contract-my-entrust.show{
            height:160px;
        }
        .contract-my-entrust table {
            width: 100%;
            border-collapse: collapse;
            border-spacing: 0;
        }
        .contract-my-entrust table thead {
            width: 500px;
        }
        .contract-my-entrust table tr {
            height: 30px;
            border-bottom: 1px solid #212340;
        }
        .contract-my-entrust table thead tr th{
            font-size: 12px;
            font-weight: 400;
            color: #666b93;
            text-align: right;
            min-width: 90px;
        }
        .contract-my-entrust table thead tr th:first-child {
            padding-left: 16px;
            text-align: left;
        }
        .contract-my-entrust table thead tr th .type1, .contract-my-entrust table thead tr th .type2 {
            color: #666b93;
        }

        .contract-my-entrust table tbody tr td {
            padding: 0;
            color: #cbd7f0;
            font-size: 12px;
            text-align: right;
            min-width: 90px;
        }
        .contract-my-entrust table tbody tr td:first-child {
            padding-left: 16px;
            text-align: left;
        }
        .contract-my-entrust table tbody tr td span {
            color: #cbd7f0;
        }
        .contract-my-entrust table tbody tr td:first-child span:last-child {
            color: #666b93;
        }
        .contract-my-entrust table tbody tr td span.buy {
            color: #3ac79f;
        }
        .contract-my-entrust .wrapper .cancel-single {
            color: #0976d9;
            cursor: pointer;
        }
        .create-item{
            position: relative;
            padding-top: 50px;
            padding-bottom: 50px;
            border-bottom-left-radius: 3px;
            border-bottom-right-radius: 3px;
        }
        .create-item h3 {
            font-size: 16px;
            color: #cbd7f0;
        }
        .create-item div{
            margin-top: 45px;
            width: 270px;
        }
        .create-item div input[type=submit]{
            width: 120px;
            height: 40px;
            font-size: 16px;
            color: #cbd7f0;
            background: none;
            border: 1px solid #0976d9;
            border-radius: 3px;
        }
        .create-item div input[type=submit]:hover {
            color: #cbd7f0;
            background: #0976d9;
            cursor: pointer;
        }
        .contract-my-entrust table tbody tr td:last-child{
            padding-right: 20px;
        }
        .red,.red span{
            color:#d64172!important;
        }
        .green,.green span{
            color:#3ac79f!important;
        }


        /*滚动条*/
        .zUIpanelScrollBox,.zUIpanelScrollBar{
            width:6px;
            top:4px;
            right:2px;
            border-radius:5px;

        }
        .zUIpanelScrollBox{
            background:rgb(29, 31, 53);
            opacity:0.9;
            filter:alpha(opacity=10);
            display: block!important;
        }
        .zUIpanelScrollBar{
            background:rgb(59, 59, 99);opacity:0.8;
            filter:alpha(opacity=80);
            display: block!important;
        }
        /*币种介绍*/
        .introduction div span{
            background-color: #141625!important;
            color:#cbd7f0!important;
            font-size:14px!important;
            word-break: break-all;
            /*display: -webkit-box;*/
            -webkit-line-clamp: 9;
            -webkit-box-orient: vertical;
            overflow: hidden;

        }
    </style>

</head>
<body>

<div class="loading">
    <div class="loading-logo">
        <div class="list">
            <div class="item loading-col-1"></div>
            <div class="item loading-col-2"></div>
            <div class="item loading-col-3"></div>
            <div class="item loading-col-4"></div>
            <div class="item loading-col-5"></div>
            <div class="item loading-col-6"></div>
            <div class="item loading-col-7"></div>
            <div class="item loading-col-8"></div>
            <div class="item loading-col-9"></div>
            <div class="item loading-col-10"></div>
        </div>
        <p>{$GLOBALS['loading']}......</p>
    </div>
</div>
<div id="app">
    <div class="trade-index" >
        <!--头部-->
        <include file="Public:header"/>
        <!--头部   end-->
        <div class="main flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap"
        >
          <input type="hidden" value="{$Think.get.market|strtoupper}" id="K_market">
            <div class="left" >
                <div class="product-list" >
                    <div class="title flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap"
                    >
                        <h3>{$GLOBALS['market']}</h3>
                        <div>
                            <input value="" placeholder="请输入币种" type="hidden">
                            <!----></div>
                    </div>
                    <div class="changeData flex-box flex-direction-row flex-justify-between flex-align-item-start flex-wrap-nowrap">
                        <div class="coinType flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap nav cn">
                            <a class="" value="JEFF" style="display:none">JEFF</a>
                            <a class="" value="USDT">USDT</a>
                            <a class="" value="BTC">BTC</a>
							<a class="" value="ETH">ETH</a>
                        </div>
                        <div class="flex-box flex-direction-row flex-justify-end flex-align-item-center flex-wrap-nowrap nav  optional cn"
                        >
                            <a class="">
                                <!-- <span></span>自选 -->
                            </a>
                        </div>
                    </div>
                    <div class="container">
                        <div style="padding-left: 16px;"
                             class="list-title item-border flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap"
                        >
                            <h4 class="col-1">{$GLOBALS['coin-name']}</h4>
                            <h4 class="col-2">{$GLOBALS['new-price']}</h4>
                            <h4 class="col-3">{$GLOBALS['change-price']}</h4>
                            <h4 style="width: 14px;"></h4>
                        </div>
                        <div class="bg"></div>
                        <div style="max-height: 300px;" class="easy-scrollbar chromeScrollShow">
                            <div style="margin-right: -17px;" class="easy-scrollbar__wrap">
                                <div style="position: relative;" class="el-scrollbar__view">
                                    <div style="max-height: 300px; padding-right: 20px;" class="wrapper">
                                        <!--<volist name="coinlist.BDB" id="v">

                                            <div class="new-data-bb item flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap item-border" style="padding-left:16px;display:flex;" onclick="window.top.location.href='/trade/index/market/{$v['name']}'">
                                                <p class="col-1 bizhong_en">{$v['xnb']|strtoupper}/{$v['rmb']|strtoupper}</p>
                                                <p class="col-2 left-price <egt name="v.change" value="0">rate_up<else/>rate_down</egt>">{$v.new_price|sprintf="%.6f",###}</p>
                                                <p class="col-3 rzd class="<egt name="v.change" value="0">red<else/>green</egt>"><span class="p-num">{$v.change|round=2}%</span> </p>
                                                <p>
                                                    <a class="col-4"></a>
                                                </p>
                                            </div>
                                        </volist>-->

                                        <volist name="coinlist.USDT" id="u">
                                            <div class="new-data-usdt item flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap item-border" style="padding-left: 16px;display:none;" onclick="window.top.location.href='/trade/index/market/{$u['name']}'">
                                                <p class="col-1 bizhong_en">{$u['xnb']|strtoupper}/{$u['rmb']|strtoupper}</p>
                                                <p class="col-2 left-price <egt name="u.change" value="0">rate_up<else/>rate_down</egt>">{$u.new_price|sprintf="%.6f",###}</p>
                                                <p class="col-3 rzd"><span class="<egt name="u.change" value="0">red<else/>green</egt>"><span class="p-num">{$u.change|round=2}%</span> </p>
                                                <p>
                                                    <a class="col-4"></a>
                                                </p>
                                            </div>
                                        </volist>

                                        <volist name="coinlist.BTC" id="b">

                                            <div class="new-data-btc item flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap item-border" style="padding-left: 16px;display:none;"  onclick="window.top.location.href='/trade/index/market/{$b['name']}'">
                                                <p class="col-1">{$b['xnb']|strtoupper}/{$b['rmb']|strtoupper}</p>
                                                <p class="col-2 left-price <egt name="b.change" value="0">rate_up<else/>rate_down</egt>">{$b.new_price|sprintf="%.6f",###}</p>
                                                <p class="col-3 <egt name="b.change" value="0">red<else/>green</egt>"><span class="p-num">{$b.change|round=2}%</span> </p>
                                                <p>
                                                    <a class="col-4"></a>
                                                </p>
                                            </div>

                                        </volist>
										
										<volist name="coinlist.ETH" id="h">

                                            <div class="new-data-eth item flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap item-border" style="padding-left: 16px;display:none;"  onclick="window.top.location.href='/trade/index/market/{$h['name']}'">
                                                <p class="col-1">{$h['xnb']|strtoupper}/{$h['rmb']|strtoupper}</p>
                                                <p class="col-2 left-price <egt name="h.change" value="0">rate_up<else/>rate_down</egt>">{$h.new_price|sprintf="%.6f",###}</p>
                                                <p class="col-3 <egt name="h.change" value="0">red<else/>green</egt>"><span class="p-num">{$h.change|round=2}%</span> </p>
                                                <p>
                                                    <a class="col-4"></a>
                                                </p>
                                            </div>

                                        </volist>

                                    </div>
                                    <div class="resize-triggers">
                                        <div class="expand-trigger">
                                            <div style="width: 361px; height: 301px;"></div>
                                        </div>
                                        <div class="contract-trigger"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!---->
                    </div>


                </div>
                <div class="contract-trade margin" >
                    <div class="header flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap">
                        <div class="active1">{$GLOBALS['buy']}</div>
                        <div class="">{$GLOBALS['sell']}</div>
                    </div>
                    <div style="margin:0 16px;" class="title priceType title-price flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap">
                        <div class="limit-price active">{$GLOBALS['limit-price']}</div>
                        <div class="market-price">{$GLOBALS['market-price']}</div>
                    </div>

                    <!--买入-->
                    <div class="buyDiv">
                        <div class="able flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap">
                            <p>{$GLOBALS['canUser-money']}：<span id="my_rmb" style="font-weight:bold">0</span> {$data.s2|strtoupper}</p>
                            <!--<a class="popShow">{$GLOBALS['turnIn']}</a>-->
                        </div>
                        <!--限价-->
                        <div class="form limitPrice">
                            <div class="trade-label flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap">
                                <span>{$GLOBALS['buy-price']}</span>
                            </div>
                            <div class="input flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                <div class="flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap item">
                                    <span>{$data.s2|strtoupper}</span>
                                    <input type="number" id="buy_price"  class="inputRate price" maxlength="14" onkeyup="keyPrice($(this),$('#my_rmb'),$('#buy_max'))" value="">
                                    <div style="display: none;" class="error">{$GLOBALS['greater0']}</div>
                                </div>
                            </div>
                            <p class="cny">≈ 0 CNY</p>
                            <div class="trade-label trade-label1 flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap">
                                <span>{$GLOBALS['buy-number']}</span></div>
                            <div class="input flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                <div class="flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap item">
                                    <span>{$data.s1|strtoupper}</span>
                                    <input id="buy_num" type="number" class="inputRate" maxlength="14" onkeyup="keyNumber($(this),$('#buy_price'),$('#buy_max'),$('.area1'))" value="0"  >
                                    <div style="display: none;" class="error">{$GLOBALS['minimum']}</div>
                                </div>
                            </div>
                            <div class="total flex-box flex-direction-row flex-justify-between flex-align-item-start flex-wrap-nowrap">
                                <p>{$GLOBALS['buy-maximum']}：</p>
                                <p><span id="buy_max" style="font-weight:bold">0 </span>{$data.s1|strtoupper}
                                    <!---->
                                    <span class="tip" style="display: none;" title="溢价0.05%的约算"></span>
                                </p>
                            </div>
                            <div class="ratio">
                                <div class="st-slider slider">
                                    <div class="area area1">
                                        <div class="percent0"></div>
                                        <div class="percent25"></div>
                                        <div class="percent50"></div>
                                        <div class="percent75"></div>
                                        <div class="end"></div>
                                        <div style="width: 0px;" class="progress"></div>
                                        <div width="328" style="left: 0px;" class="st-slider-button"></div>
                                    </div>
                                    <div class="flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap">
                                        <p style="margin-left: -4px;">0</p>
                                        <p class="showNum1">0%</p></div>
                                </div>
                            </div>
                            <div class="trade-price flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                <p>{$GLOBALS['trade-money']}:</p>
                                <p id="buy_money">0</p>
                                <p style="margin-left:5px;">{$data.s2|strtoupper}</p>
                            </div>
                            <input value="{$GLOBALS['buy']}" class="buy" type="submit" onclick="tradeadd_buy();">
                        </div>
                        <!--市价-->
                        <div class="form commonPrice" style="display: none;">
                            <div class="trade-label flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap">
                                <span>{$GLOBALS['buy-price']}</span></div>
                            <div class="input flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                <div class="flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap item">
                                    <span>{$data.s2|strtoupper}</span>
                                    <input placeholder="{$GLOBALS['best-price']}" id="buy_price1" class="inputRate price" maxlength="14" disabled value="">
                                    <div style="display: none;" class="error">{$GLOBALS['greater0']}</div>
                                </div>
                            </div>
                            <p class="cny">≈ 0 CNY</p>
                            <div class="trade-label trade-label1 flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap">
                                <span>{$GLOBALS['buy-number']} </span></div>
                            <div class="input flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                <div class="flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap item">
                                    <span>{$data.s1|strtoupper}</span>
                                    <input type="number"  id="buy_num1" class="inputRate" maxlength="14" onkeyup="keyNumber($(this),$('#buy_price1'),$('#buy_max'),$('.area2'))" value="0">
                                    <div style="display: none;" class="error">{$GLOBALS['minimum']}</div>
                                </div>
                            </div>
                            <div class="total flex-box flex-direction-row flex-justify-between flex-align-item-start flex-wrap-nowrap">
                                <p>{$GLOBALS['buy-maximum']}:</p>
                                <p><span id="buy_max1" style="font-weight:bold">0</span>
                                    {$data.s1|strtoupper}
                                    <!---->
                                    <span class="tip" title="溢价0.05%的约算"></span>
                                </p>

                            </div>
                            <div class="ratio">
                                <div class="st-slider slider">
                                    <div class="area area2">
                                        <div class="percent0"></div>
                                        <div class="percent25"></div>
                                        <div class="percent50"></div>
                                        <div class="percent75"></div>
                                        <div class="end"></div>
                                        <div style="width: 0px;" class="progress"></div>
                                        <div width="328" style="left: 0px;" class="st-slider-button"></div>
                                    </div>
                                    <div class="flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap">
                                        <p style="margin-left: -4px;">0</p>
                                        <p class="showNum2">0%</p></div>
                                </div>
                            </div>
                            <div class="trade-price flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap"></div>
                            <input value="{$GLOBALS['buy']}" class="buy" type="submit" onclick="tradeadd_buy();">
                        </div>
                    </div>


                    <!--卖出-->
                    <div class="sellDiv" style="display: none;">
                        <div class="able flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap">
                            <p>{$GLOBALS['canUser-money']}:<span id="my_xnb" style="font-weight:bold">0 </span>{$data.s1|strtoupper}</p>
                            <!-- <a class="popShow">转入</a> -->
                        </div>
                        <!--限价-->
                        <div class="form limitPrice" style="display: none;">
                            <div class="trade-label flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap">
                                <span>{$GLOBALS['sell-price']}</span></div>
                            <div class="input flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                <div class="flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap item">
                                    <span>{$data.s2|strtoupper}</span>
                                    <input id="sell_price" type="number"  class="inputRate price" maxlength="14" value="{$price|round=2}" placeholder="" onkeyup="keyPrice($(this),$('#my_xnb'),$('#sell_max'))"/>
                                    <div style="display: none;" class="error"></div>
                                </div>
                            </div>
                            <p class="cny">≈ 0 CNY</p>
                            <div class="trade-label flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap">
                                <span>{$GLOBALS['sell-number']}</span></div>
                            <div class="input flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                <div class="flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap item">
                                    <span>{$data.s1|strtoupper}</span>
                                    <input id="sell_num" type="number"  class="inputRate" maxlength="14" onkeyup="keyNumber($(this),$('#sell_price'),$('#sell_max'),$('.area3'))" value="0">
                                    <div style="display: none;" class="error"></div>
                                </div>
                            </div>
                            <div class="total flex-box flex-direction-row flex-justify-between flex-align-item-start flex-wrap-nowrap">
                                <p>{$GLOBALS['sell-maximum']}:</p>
                                <p><span id="sell_max" style="font-weight:bold">0.156 </span>{$data.s2|strtoupper}
                                    <!----></p></div>
                            <div class="ratio">
                                <div class="st-slider slider">
                                    <div class="area area3">
                                        <div class="percent0"></div>
                                        <div class="percent25"></div>
                                        <div class="percent50"></div>
                                        <div class="percent75"></div>
                                        <div class="end"></div>
                                        <div style="width: 0px;" class="progress"></div>
                                        <div width="328" style="left: 0px;" class="st-slider-button"
                                        ></div>
                                    </div>
                                    <div class="flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap">
                                        <p style="margin-left: -4px;">0</p>
                                        <p class="showNum3">0%</p></div>
                                </div>
                            </div>
                            <div class="trade-price flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                <p>{$GLOBALS['trade-money']}:</p>
                                <p id="sell_money">0 </p>
                                <p style="margin-left:5px;">{$data.s2|strtoupper}</p>
                            </div>
                            <input value="{$GLOBALS['sell']}" class="buy" type="submit" style="background:#b92e5d;" onclick="tradeadd_sell()">
                        </div>

                        <!--市价-->
                        <div class="form commonPrice" style="display: none;">
                            <div class="trade-label flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap">
                                <span>{$GLOBALS['sell-price']}</span></div>
                            <div class="input flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                <div class="flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap item">
                                    <span>{$data.s2|strtoupper}</span>
                                    <input id="sell_price1" class="inputRate price" maxlength="14" value="{$price|round=2}" placeholder="{$GLOBALS['best-price']}" disabled="">
                                    <div style="display: none;" class="error"></div>
                                </div>
                            </div>
                            <p class="cny">≈ 0 CNY</p>
                            <div class="trade-label flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap">
                                <span>{$GLOBALS['sell-number']}</span></div>
                            <div class="input flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                <div class="flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap item">
                                    <span>{$data.s1|strtoupper}</span>
                                    <input type="number"  id="sell_num1" class="inputRate" maxlength="14" onkeyup="keyNumber($(this),$('#sell_price'),$('#sell_max'),$('.area4'))" value="0">
                                    <div style="display: none;" class="error"></div>
                                </div>
                            </div>
                            <div class="total flex-box flex-direction-row flex-justify-between flex-align-item-start flex-wrap-nowrap">
                                <p>{$GLOBALS['buy-maximum']}:</p>
                                <p><span id="sell_max1" style="font-weight:bold">0.156 </span>{$data.s2|strtoupper}
                                    <!----></p></div>
                            <div class="ratio">
                                <div class="st-slider slider">
                                    <div class="area area4">
                                        <div class="percent0"></div>
                                        <div class="percent25"></div>
                                        <div class="percent50"></div>
                                        <div class="percent75"></div>
                                        <div class="end"></div>
                                        <div style="width: 0px;" class="progress"></div>
                                        <div width="328" style="left: 0px;" class="st-slider-button"
                                        ></div>
                                    </div>
                                    <div class="flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap">
                                        <p style="margin-left: -4px;">0</p>
                                        <p class="showNum4">0%</p></div>
                                </div>
                            </div>
                            <div class="trade-price flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap"></div>
                            <input value="{$GLOBALS['sell']}" class="buy" type="submit" style="background:#b92e5d;" onclick="tradeadd_sell()">
                        </div>

                    </div>

                    <!---->
                    <!--转入弹出框-->
                    <div  class="popup popupIn flex-box flex-direction-row flex-justify-center flex-align-item-center flex-wrap-nowrap" style="display: none;">
                        <div class="popup-box">
                            <div class="header flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap">
                                <h3>{$data.s1|strtoupper} {$GLOBALS['transfer-accounts']}</h3>
                                <a></a>
                            </div>
                            <!--<form class="transfer-accounts">-->
                            <div class="transfer-accounts">
                                <div class="item flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap">
                                    <p class="label">{$GLOBALS['from']}</p>
                                    <div tabindex="0" class="loan-select" style="width: 360px;">
                                        <div class="box boxStart flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap" style="cursor: pointer;">
                                            <p>{$GLOBALS['please-select']}</p>
                                            <span class=""></span>
                                        </div>
                                        <div class="options easy-scrollbar chromeScrollShow" style="max-height: 180px;">
                                            <div class="easy-scrollbar__wrap" style="margin-right: -17px;">
                                                <div class="el-scrollbar__view" style="position: relative;">
                                                    <div class="wrapper" style="max-height: 180px;">
                                                        <ul style="display: none;">
                                                            <li class="transfer-option">{$GLOBALS['trade']}</li>
                                                            <li class="transfer-option">{$GLOBALS['borrowMoney']}</li>
                                                        </ul>
                                                    </div>
                                                    <div class="resize-triggers">
                                                        <div class="expand-trigger">
                                                            <div style="width: 361px; height: 1px;"></div>
                                                        </div>
                                                        <div class="contract-trigger"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!---->
                                </div>
                                <!---->
                                <div class="item flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap">
                                    <p class="label">{$GLOBALS['to']}</p>
                                    <div tabindex="0" class="loan-select" style="width: 360px;">
                                        <div class="box boxEnd flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap" style="cursor: initial;">
                                            <p>{$GLOBALS['trade']}</p>
                                            <!---->
                                        </div>
                                        <div class="options easy-scrollbar chromeScrollShow" style="max-height: 180px;">
                                            <div class="easy-scrollbar__wrap" style="margin-right: -17px;">
                                                <div class="el-scrollbar__view" style="position: relative;">
                                                    <div class="wrapper" style="max-height: 180px;">
                                                        <ul style="display: none;">
                                                            <li class="transfer-option">{$GLOBALS['trade']}</li>
                                                            <li class="transfer-option">{$GLOBALS['borrowMoney']}</li>
                                                        </ul>
                                                    </div>
                                                    <div class="resize-triggers">
                                                        <div class="expand-trigger">
                                                            <div style="width: 361px; height: 1px;"></div>
                                                        </div>
                                                        <div class="contract-trigger"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!---->
                                </div>
                                <div class="item flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                    <p class="label">{$GLOBALS['turn-money']}</p>
                                    <input type="number" placeholder="{$GLOBALS['place-turnMoney']}" class="turnMoney"/>
                                    <p class="transfer-all">{$GLOBALS['turn-all']}</p>
                                </div>
                                <p class="tip1">{$GLOBALS['turn-maximum']} -- USDT</p>
                                <input type="submit" value="{$GLOBALS['transfer-accounts']}" class="turnBtn" />
                                <p class="tip2">{$GLOBALS['turn-service']}</p>
                                <!---->
                            </div>
                        </div>
                    </div>
                    <!---->
                </div>
                <div class="notice-list margin" >
                    <h3>{$GLOBALS['article']}</h3>
                    <div class="list">
                        <volist name="notice" id="vo">
						<eq name="Think.session.lang" value="1">
							<notempty name="vo['title']" value=" ">
								<a class="item" target="_top" href="/Article/detail/id/{$vo['id']}">
									<h4>{$vo['title']}</h4>
									<p>{$vo['addtime']|addtime}</p>
								</a>
							</notempty>
						</eq>
						<eq name="Think.session.lang" value="2">
							<notempty name="vo['title_e']" value=" ">
								<a class="item" target="_top" href="/Article/detail/id/{$vo['id']}">
									<h4>{$vo['title_e']}</h4>
									<p>{$vo['addtime']|addtime}</p>
								</a>
							</notempty>
						</eq>
						<eq name="Think.session.lang" value="3">
							<notempty name="vo['title_en']" value=" ">
								<a class="item" target="_top" href="/Article/detail/id/{$vo['id']}">
									<h4>{$vo['title_en']}</h4>
									<p>{$vo['addtime']|addtime}</p>
								</a>
							</notempty>
						</eq>
                        </volist>
                        <!-- <a class="item" target="_top" href="/Article/type">
                            <h4>第九周回购信息披露</h4>
                            <p>2018-08-20 18:32:51</p></a>
                        <a class="item" target="_top" href="/Article/type">
                            <h4>关于场外交易维护升级></h4>
                            <p>2018-08-17 15:25:28</p></a>
                        <a class="item" target="_top" href="/Article/type">
                            <h4>关于提前恢复永续合约交易手续费的公告</h4>
                            <p>2018-08-15 14:11:02</p></a> -->
                    </div>
                </div>
            </div>
            <div class="right" >
                <div class="flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap">
                    <div class="product-info show"  style="height:800px">
                        <div class="product-info-top flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                            <div class="arrow flex-box flex-direction-row flex-justify-center flex-align-item-center flex-wrap-nowrap">
                                <a class=""></a>
                            </div>
                            <h3>{$data.s1|strtoupper}/{$data.s2|strtoupper}</h3>
                            <div class="item first-item flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                <p>{$GLOBALS['newTrade-price']}</p>
                                <div class="flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                    <span id="market_new_price"></span> <span style="margin-left:5px;">{$data.s2|strtoupper}</span>
                                </div>
                                <p class="cny" id="">≈ <span id="cny_prices" style="display:inline-block"></span> CNY</p></div>
                            <div class="item flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                <p>{$GLOBALS['change-price']}</p>
                                <span id="market_change"></span></div>
                            <div class="item flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                <p>{$GLOBALS['dayTrade']}</p>
                                <span class="volume" id="market_volume"></span></div>
                        </div>
                        <div id="tv_chart_container" >
                           
                        </div>
                      
                    </div>
                    <div class="contract-entrust show"  style="height:800px">
                        <div class="title flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                            <div class="arrow flex-box flex-direction-row flex-justify-center flex-align-item-center flex-wrap-nowrap"
                            >
                                <a class=""></a>
                            </div>
                            <h3>{$GLOBALS['new-price']} <span id="orderbook_last_rate"></span> {$data.s2|strtoupper}</h3></div>
                        <div class="list">
                            <table>
                                <thead>
                                <tr style="height: 40px;">
                                    <th>{$GLOBALS['price']} ({$data.s2|strtoupper})</th>
                                    <th width="158">{$GLOBALS['number']} ({$data.s1|strtoupper})</th>
                                   	<!--<th width="178">{$GLOBALS['total-number']} ({$data.s2|strtoupper})</th>-->
                                  	<th width="178">{$GLOBALS['trade-time']}</th>
                                </tr>
                                </thead>
                                <tbody id="ul-ask-list1">

                                </tbody>
                                <tbody id="ul-bid-list1" data-id="bid-list" style="border-top:1px solid #212340;">

                                </tbody>
                            </table>

                            <div class="deep flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap" style="display: none;">
                                <p>{$GLOBALS['consolidation-depth']}:</p>
                                <div class="deep-button flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap">
                                    <a class="active">2位</a>
                                    <a class="">1位</a>
                                    <a class="">0位</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="contract-my-entrust margin show" id="op_computer_bg">
                    <div class="title flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap"
                    >
                        <div class="arrow flex-box flex-direction-row flex-justify-center flex-align-item-center flex-wrap-nowrap"
                        >
                            <a class="" ></a>
                        </div>
                        <div class="orderChange flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap"
                        >
                            <h3 style="margin-right: 40px;"  class="ws-tab active">{$GLOBALS['current-entrust']}</h3>
                            <h3  class="ws-tab">{$GLOBALS['history-entrust']}</h3>
                        </div>
                        <div class="blank" ></div>
                        <!-- <a class="cancel-all" >{$GLOBALS['cancel-all-entrust']}</a>-->
                        <!-- <a href="/Trade/historyRecord" class="check-all" style="font-size: 12px;display: none;">查看历史委托</a> -->
                    </div>
                    <div >
                        <div class="wrapper flex-box flex-direction-column flex-justify-start flex-align-item-start flex-wrap-nowrap">
                            <!--当前委托-->
                            <div style="width: 100%;position: relative;" class="current-list">
                                <table class="thead">
                                    <thead>
                                    <tr>
                                        <th><span class="type1">{$GLOBALS['entrust-time']}</span></th>
                                        <th><span class="type1">{$GLOBALS['trade-coin']}</span></th>
                                        <th><span class="type1">{$GLOBALS['order-type']}</span></th>
                                        <th><span class="type1">{$GLOBALS['entrust-price']}({$data.s2|strtoupper})</span></th>
                                        <th><span class="type2">{$GLOBALS['entrust-number']}({$data.s1|strtoupper})</span></th>
                                        <!--<th><span class="type1">平均成交价({$data.s2|strtoupper})</span></th>-->
                                        <th><span class="type2">{$GLOBALS['surplus-number']}({$data.s1|strtoupper}) </span></th>
                                        <th><span class="type2">{$GLOBALS['order-status']}</span></th>
                                        <th style="padding-right:20px;"><span class="type2">{$GLOBALS['order-operate']}</span></th>
                                    </tr>
                                    </thead>
                                </table>
                                <div class="scroll" style="overflow: hidden;height:90px;">
                                    <table>
                                        <tbody class="zhu-content0">

                                        </tbody>
                                    </table>
                                </div>
                                <div class="no-list"  style="display: none;">
                                    <p  class="ws-tabp">{$GLOBALS['noData']}</p>
                                </div>
                            </div>
                            <!--历史委托-->
                            <div style="width: 100%;display: none;" class="history-list" >
                                <table class="thead">
                                    <thead>
                                    <tr>
                                        <th><span class="type1">{$GLOBALS['entrust-time']}</span></th>
                                        <th><span class="type1">{$GLOBALS['trade-coin']}</span></th>
                                        <th><span class="type1">{$GLOBALS['order-type']}</span></th>
                                        <th><span class="type1">{$GLOBALS['entrust-price']}({$data.s2|strtoupper})</span></th>
                                        <th><span class="type2">{$GLOBALS['entrust-number']}（{$data.s1|strtoupper}）</span></th>
                                        <th><span class="type2">{$GLOBALS['turnover']}({$data.s1|strtoupper}) </span></th>
                                        <th style="padding-right: 20px;"><span class="type2">{$GLOBALS['order-status']}</span></th>
                                    </tr>
                                    </thead>
                                </table>
                                <div class="scroll" style="overflow: hidden;height:90px;">
                                    <table>
                                        <tbody class="zhu-content1">

                                        </tbody>
                                    </table>
                                </div>
                                <div class="no-list" style="display: none;">
                                    <p  class="ws-tabp">{$GLOBALS['noData']}</p>
                                </div>
                            </div>

                        </div>
                        <!---->
                    </div>
                    <!---->
                    <!--确定撤销弹框-->
                    <div class="popup cancelPopup flex-box flex-direction-row flex-justify-center flex-align-item-center flex-wrap-nowrap" style="display:none;">
                        <div class="popup-box">
                            <div class="header flex-box flex-direction-row flex-justify-between flex-align-item-center flex-wrap-nowrap">
                                <h3>{$GLOBALS['cancel-order']}</h3>
                                <a></a>
                            </div>
                            <div class="create-item flex-box flex-direction-column flex-justify-start flex-align-item-center flex-wrap-nowrap">
                                <h3>{$GLOBALS['cancel-sure']}</h3>
                                <div class="flex-box flex-direction-row flex-justify-between flex-align-item-start flex-wrap-nowrap">
                                    <input type="submit" class="create-submit" value="{$GLOBALS['cancelBtn']}" />
                                    <input type="submit" class="create-submit" value="{$GLOBALS['sureBtn']}" />
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <!--深度图-->
                <div class="flex-box flex-direction-row flex-justify-start flex-align-item-start flex-wrap-nowrap" style="display: none;">
                    <div class="contract-deep show"  >
                        <div class="title flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap"
                        >
                            <div class="arrow flex-box flex-direction-row flex-justify-center flex-align-item-center flex-wrap-nowrap"
                            >
                                <a class="" ></a>
                            </div>
                            <h3 >深度图</h3></div>
                        <div class="deep-canvas" >
                            <canvas height="442" width="1139" ></canvas>
                            <canvas height="442" width="1139" class="tool-tips" ></canvas>
                        </div>
                    </div>
                    <div class="contract-history show" >
                        <div class="title flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap"
                        >
                            <div class="arrow flex-box flex-direction-row flex-justify-center flex-align-item-center flex-wrap-nowrap"
                            >
                                <a class=""></a>
                            </div>
                            <h3>实时成交</h3></div>
                        <div class="list">
                            <table style="margin-right: 20px;">
                                <thead>
                                <tr>
                                    <th style="min-width: 40px; padding-left: 16px;">
                                        <span>时间</span></th>
                                    <th>
                                        <span class="type1">价格 (USDT)</span></th>
                                    <th style="padding-right: 20px;">
                                        <span class="type2">数量 (BTC)</span></th>
                                </tr>
                                </thead>
                            </table>
                            <div class="bg"></div>
                            <div style="height: 370px;" class="easy-scrollbar chromeScrollShow">
                                <div style="margin-right: -17px;" class="easy-scrollbar__wrap">
                                    <div style="position: relative;" class="el-scrollbar__view">
                                        <div style="height: 350px; padding-right: 20px;" class="wrapper"
                                        >
                                            <table>
                                                <tbody>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:55:30</span></td>
                                                    <td>
                                                        <span class="type1 buy">6671.77</span></td>
                                                    <td>
                                                        <span class="type2 buy">14.572</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:55:07</span></td>
                                                    <td>
                                                        <span class="type1 sell">6671.33</span></td>
                                                    <td>
                                                        <span class="type2 sell">18.587</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:54:40</span></td>
                                                    <td>
                                                        <span class="type1 sell">6671.63</span></td>
                                                    <td>
                                                        <span class="type2 sell">16.345</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:54:04</span></td>
                                                    <td>
                                                        <span class="type1 buy">6674.70</span></td>
                                                    <td>
                                                        <span class="type2 buy">57.588</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:53:30</span></td>
                                                    <td>
                                                        <span class="type1 sell">6676.66</span></td>
                                                    <td>
                                                        <span class="type2 sell">51.836</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:52:50</span></td>
                                                    <td>
                                                        <span class="type1 buy">6676.71</span></td>
                                                    <td>
                                                        <span class="type2 buy">85.743</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:52:16</span></td>
                                                    <td>
                                                        <span class="type1 buy">6677.15</span></td>
                                                    <td>
                                                        <span class="type2 buy">16.804</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:51:49</span></td>
                                                    <td>
                                                        <span class="type1 sell">6677.17</span></td>
                                                    <td>
                                                        <span class="type2 sell">42.669</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:51:23</span></td>
                                                    <td>
                                                        <span class="type1 buy">6677.71</span></td>
                                                    <td>
                                                        <span class="type2 buy">37.493</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:50:54</span></td>
                                                    <td>
                                                        <span class="type1 sell">6677.66</span></td>
                                                    <td>
                                                        <span class="type2 sell">75.065</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:50:19</span></td>
                                                    <td>
                                                        <span class="type1 sell">6677.09</span></td>
                                                    <td>
                                                        <span class="type2 sell">72.824</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:49:48</span></td>
                                                    <td>
                                                        <span class="type1 buy">6675.90</span></td>
                                                    <td>
                                                        <span class="type2 buy">85.219</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:49:09</span></td>
                                                    <td>
                                                        <span class="type1 buy">6676.49</span></td>
                                                    <td>
                                                        <span class="type2 buy">56.065</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:48:43</span></td>
                                                    <td>
                                                        <span class="type1 buy">6679.40</span></td>
                                                    <td>
                                                        <span class="type2 buy">45.623</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:48:19</span></td>
                                                    <td>
                                                        <span class="type1 sell">6679.67</span></td>
                                                    <td>
                                                        <span class="type2 sell">76.581</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:47:41</span></td>
                                                    <td>
                                                        <span class="type1 buy">6679.96</span></td>
                                                    <td>
                                                        <span class="type2 buy">27.095</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:47:07</span></td>
                                                    <td>
                                                        <span class="type1 buy">6680.01</span></td>
                                                    <td>
                                                        <span class="type2 buy">53.700</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:46:32</span></td>
                                                    <td>
                                                        <span class="type1 buy">6681.61</span></td>
                                                    <td>
                                                        <span class="type2 buy">27.158</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:45:52</span></td>
                                                    <td>
                                                        <span class="type1 sell">6681.98</span></td>
                                                    <td>
                                                        <span class="type2 sell">34.063</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:45:27</span></td>
                                                    <td>
                                                        <span class="type1 buy">6682.06</span></td>
                                                    <td>
                                                        <span class="type2 buy">48.010</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:44:51</span></td>
                                                    <td>
                                                        <span class="type1 buy">6681.94</span></td>
                                                    <td>
                                                        <span class="type2 buy">24.702</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:44:21</span></td>
                                                    <td>
                                                        <span class="type1 buy">6682.85</span></td>
                                                    <td>
                                                        <span class="type2 buy">32.891</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:43:44</span></td>
                                                    <td>
                                                        <span class="type1 buy">6682.04</span></td>
                                                    <td>
                                                        <span class="type2 buy">25.449</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:43:20</span></td>
                                                    <td>
                                                        <span class="type1 sell">6681.54</span></td>
                                                    <td>
                                                        <span class="type2 sell">51.358</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:42:54</span></td>
                                                    <td>
                                                        <span class="type1 sell">6679.47</span></td>
                                                    <td>
                                                        <span class="type2 sell">29.511</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:42:27</span></td>
                                                    <td>
                                                        <span class="type1 sell">6677.77</span></td>
                                                    <td>
                                                        <span class="type2 sell">49.048</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:42:06</span></td>
                                                    <td>
                                                        <span class="type1 buy">6678.08</span></td>
                                                    <td>
                                                        <span class="type2 buy">22.460</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:41:39</span></td>
                                                    <td>
                                                        <span class="type1 sell">6676.36</span></td>
                                                    <td>
                                                        <span class="type2 sell">40.217</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:41:03</span></td>
                                                    <td>
                                                        <span class="type1 buy">6675.16</span></td>
                                                    <td>
                                                        <span class="type2 buy">15.934</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:40:40</span></td>
                                                    <td>
                                                        <span class="type1 buy">6674.31</span></td>
                                                    <td>
                                                        <span class="type2 buy">23.728</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:40:16</span></td>
                                                    <td>
                                                        <span class="type1 sell">6674.56</span></td>
                                                    <td>
                                                        <span class="type2 sell">37.118</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:39:44</span></td>
                                                    <td>
                                                        <span class="type1 sell">6673.63</span></td>
                                                    <td>
                                                        <span class="type2 sell">90.493</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:39:08</span></td>
                                                    <td>
                                                        <span class="type1 buy">6671.11</span></td>
                                                    <td>
                                                        <span class="type2 buy">46.559</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:38:29</span></td>
                                                    <td>
                                                        <span class="type1 sell">6668.97</span></td>
                                                    <td>
                                                        <span class="type2 sell">127.373</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:37:50</span></td>
                                                    <td>
                                                        <span class="type1 sell">6668.25</span></td>
                                                    <td>
                                                        <span class="type2 sell">10.198</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:37:20</span></td>
                                                    <td>
                                                        <span class="type1 sell">6668.88</span></td>
                                                    <td>
                                                        <span class="type2 sell">15.608</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:36:42</span></td>
                                                    <td>
                                                        <span class="type1 buy">6669.58</span></td>
                                                    <td>
                                                        <span class="type2 buy">21.319</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:36:07</span></td>
                                                    <td>
                                                        <span class="type1 sell">6669.36</span></td>
                                                    <td>
                                                        <span class="type2 sell">61.999</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:35:35</span></td>
                                                    <td>
                                                        <span class="type1 sell">6668.60</span></td>
                                                    <td>
                                                        <span class="type2 sell">135.992</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:35:01</span></td>
                                                    <td>
                                                        <span class="type1 buy">6670.46</span></td>
                                                    <td>
                                                        <span class="type2 buy">199.247</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:34:24</span></td>
                                                    <td>
                                                        <span class="type1 sell">6671.07</span></td>
                                                    <td>
                                                        <span class="type2 sell">61.178</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:34:02</span></td>
                                                    <td>
                                                        <span class="type1 sell">6670.41</span></td>
                                                    <td>
                                                        <span class="type2 sell">11.913</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:33:36</span></td>
                                                    <td>
                                                        <span class="type1 sell">6670.89</span></td>
                                                    <td>
                                                        <span class="type2 sell">71.485</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:33:11</span></td>
                                                    <td>
                                                        <span class="type1 buy">6671.19</span></td>
                                                    <td>
                                                        <span class="type2 buy">19.218</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:32:39</span></td>
                                                    <td>
                                                        <span class="type1 buy">6672.11</span></td>
                                                    <td>
                                                        <span class="type2 buy">10.606</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:32:06</span></td>
                                                    <td>
                                                        <span class="type1 buy">6672.11</span></td>
                                                    <td>
                                                        <span class="type2 buy">61.880</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:31:30</span></td>
                                                    <td>
                                                        <span class="type1 buy">6671.73</span></td>
                                                    <td>
                                                        <span class="type2 buy">96.022</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:31:01</span></td>
                                                    <td>
                                                        <span class="type1 sell">6671.52</span></td>
                                                    <td>
                                                        <span class="type2 sell">90.662</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:30:28</span></td>
                                                    <td>
                                                        <span class="type1 buy">6671.61</span></td>
                                                    <td>
                                                        <span class="type2 buy">81.162</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:29:57</span></td>
                                                    <td>
                                                        <span class="type1 sell">6672.07</span></td>
                                                    <td>
                                                        <span class="type2 sell">10.497</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:29:29</span></td>
                                                    <td>
                                                        <span class="type1 sell">6672.39</span></td>
                                                    <td>
                                                        <span class="type2 sell">19.822</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:29:07</span></td>
                                                    <td>
                                                        <span class="type1 sell">6672.99</span></td>
                                                    <td>
                                                        <span class="type2 sell">11.749</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:28:32</span></td>
                                                    <td>
                                                        <span class="type1 sell">6673.18</span></td>
                                                    <td>
                                                        <span class="type2 sell">103.182</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:27:59</span></td>
                                                    <td>
                                                        <span class="type1 sell">6675.29</span></td>
                                                    <td>
                                                        <span class="type2 sell">65.385</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:27:39</span></td>
                                                    <td>
                                                        <span class="type1 buy">6673.50</span></td>
                                                    <td>
                                                        <span class="type2 buy">15.425</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:27:08</span></td>
                                                    <td>
                                                        <span class="type1 buy">6677.25</span></td>
                                                    <td>
                                                        <span class="type2 buy">34.159</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:26:43</span></td>
                                                    <td>
                                                        <span class="type1 buy">6677.17</span></td>
                                                    <td>
                                                        <span class="type2 buy">17.161</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:26:03</span></td>
                                                    <td>
                                                        <span class="type1 buy">6678.40</span></td>
                                                    <td>
                                                        <span class="type2 buy">25.787</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:25:33</span></td>
                                                    <td>
                                                        <span class="type1 sell">6677.58</span></td>
                                                    <td>
                                                        <span class="type2 sell">10.353</span></td>
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 16px;">
                                                        <span>15:25:10</span></td>
                                                    <td>
                                                        <span class="type1 buy">6677.56</span></td>
                                                    <td>
                                                        <span class="type2 buy">26.052</span></td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="resize-triggers">
                                            <div class="expand-trigger">
                                                <div style="width: 351px; height: 351px;"></div>
                                            </div>
                                            <div class="contract-trigger"></div>
                                        </div>
                                    </div>
                                </div>
                                <div style="background-color: rgb(29, 31, 53); z-index: 200; width: 6px; right: 0px; display: block;"
                                     class="esay-scrollbar__bar is-vertical">
                                    <div style="height: 26.5152%; transform: translateY(0%); background-color: rgb(59, 59, 99); width: 6px; opacity: 0.3;"
                                         class="easy-scrollbar__thumb"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="coin-introduction margin show" >
                    <div class="title flex-box flex-direction-row flex-justify-start flex-align-item-center flex-wrap-nowrap">
                        <div class="arrow flex-box flex-direction-row flex-justify-center flex-align-item-center flex-wrap-nowrap">
                            <a  class=""></a></div>
                        <h3>{$GLOBALS['coin-data']}</h3></div>
                    <div class="content flex-box flex-direction-row flex-justify-between flex-align-item-start flex-wrap-nowrap">
                        <div class="introduction"><p>
                            <span class="coin">{$introduction['name']|strtoupper} </span> {$introduction['title']}({$introduction['js_yw']})</p>
                            <div><p class="label">{$GLOBALS['introduce']}</p>
                                <p>
								<eq name="Think.session.lang" value="1">
									<notempty name="introduction['js_sm']" value=" ">
										{$introduction['js_sm']}
								    </notempty>
								</eq>
								<eq name="Think.session.lang" value="2">
									<notempty name="introduction['js_sm_e']" value=" ">
										{$introduction['js_sm_e']}
								    </notempty>
								</eq>
								<eq name="Think.session.lang" value="3">
									<notempty name="introduction['js_sm_en']" value=" ">
										{$introduction['js_sm_en']}
								    </notempty>
								</eq>
                                    <!-- <span class="openIntroduce">展开</span> -->
                                </p>
                            </div>
                        </div>
                        <div class="details">
                            <table>
                                <tbody>
                                <tr>
                                    <td>{$GLOBALS['publish-time']}</td>
                                    <td>{$introduction['cs_fb']}</td>
                                </tr>
                                <tr>
                                    <td>{$GLOBALS['publish-number']}</td>
                                    <td>{$introduction['zl']}</td>
                                </tr>
                                <tr>
                                    <td>{$GLOBALS['total-circulation']}</td>
                                    <td>{$introduction['cl']}</td>
                                </tr>
                                <tr>
                                    <td>{$GLOBALS['raise-price']}</td>
                                    <td>--</td>
                                </tr>
                                <tr>
                                    <td>{$GLOBALS['white-book']}</td>
                                    <td><a target="_blank" href="">{$introduction['js_wk']}</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>{$GLOBALS['official-website']}</td>
                                    <td><a target="_blank" href="">{$introduction['js_gw']}</a>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
		<input type="hidden" id="market_bz" value="<?php echo explode('_', $_GET['market'])[1];?>">
        <!--底部信息-->
        <include file="Public:footer"/>
        <!--底部信息 end-->
    </div>
</div>


<div style="display: none;" class="toast">
    <span class="text"></span>
</div>
</body>

<script type="text/javascript" src="/zhisucom/js/layer.js"></script>
<script src="__PUBLIC__/Home/js/newjs/zUI.js"></script>
<script type="text/javascript" src="__PUBLIC__/Home/js/newjs/coinTrade.js"></script>
<script>
    getMaxPrice();
    getDepth();
    getTradelogNew();

    var market = "{$market}";
    /*点击“撤销”出现弹出框*/
    $(".cancel-single").click(function () {
        $(".cancelPopup").show();
    });
    $(".create-submit").click(function () {
        $(".cancelPopup").hide();
    });


    /*买入价输入设置*/
    function keyPrice(cv,tv,mv){
        clearNoNum(cv);
        // 判断整数或小数
        var vue=parseFloat(tv.html());
        if((/^(\+|-)?\d+$/.test(vue))&&vue>0){
            var l=vue.toString().length;
        }else{
            if(vue.toString().split(".")[1]){
                var l=vue.toString().split(".")[1].length;
            }
        }
        // 限制输入值的位数
        cv.next(".error").hide();
        var current=parseFloat(cv.val());
        if(current.toString().indexOf(".")>0) {
            var vue1=current.toString().split(".")[1];
            var vue0=current.toString().split(".")[0];
            current=vue1.substring(0,l);
            cv.val(vue0+"."+current);
        }
        //最大可买/卖数量
        if(cv.attr("id")=="sell_price"||cv.attr("id")=="sell_price1"){
            var maxNumber=(tv.html()*cv.val()).toFixed(l+1);
        }else{
            var maxNumber=(tv.html()/cv.val()).toFixed(l+1);
        }


        if(Number(maxNumber)==0||maxNumber==Infinity||isNaN(maxNumber)){
            mv.html("0");
        }else{
            mv.html(maxNumber);
            // console.log(maxNumber);
        }
    };
    // 输入买入数量
    function keyNumber(num,pri,max,area){
        clearNoNum(num);
        // 判断极限值是整数或小数取位数
        var vue=parseFloat(max.html());
        if((/^(\+|-)?\d+$/.test(vue))&&vue>0){
            var l=vue.toString().length;
        }else{
            if(vue.toString().split(".")[1]){
                var l=vue.toString().split(".")[1].length;
            }
        }
        // 限制输入值的位数
        num.next(".error").hide();
        var current=parseFloat(num.val());
        if(current.toString().indexOf(".")>0) {
            var vue1=current.toString().split(".")[1];
            var vue0=current.toString().split(".")[0];
            current=vue1.substring(0,l);
            num.val(vue0+"."+current);
        }

        // 进度条显示所占比例
        var current=parseFloat(num.val());
        var price=parseFloat(pri.val());
        var total=parseFloat(max.html());
        var chartWidth=parseFloat(area.css("width"));//总进度条宽
        var curChart=parseFloat(current/total*chartWidth);
        var showChar=(curChart/chartWidth*100).toFixed(2);

        if(current>=total){
            area.find(".progress").css("width","328px");//线条占款
            area.find(".st-slider-button").css("left","328px");//原点位置
            area.next("div").find("p:last-child").html("100%");//线条显示百分比
            area.find(".percent0,.percent25,.percent50,.percent75,.end").css("background","#0976d9");//原点颜色
        }else if(current<total){
            area.find(".progress").css("width",curChart+"px");
            area.find(".st-slider-button").css("left",curChart+"px");
            area.next("div").find("p:last-child").html(showChar+"%");
            if(curChart>=chartWidth){
                area.find(".percent0,.percent25,.percent50,.percent75,.end").css("background","#0976d9");
            }else if(curChart>=246){
                area.find(".percent0,.percent25,.percent50,.percent75").css("background","#0976d9");
                area.find(".end").css("background-color","rgb(102, 107, 147)");
            }else if(curChart>=164){
                area.find(".percent0,.percent25,.percent50").css("background","#0976d9");
                area.find(".end,.percent75").css("background-color","rgb(102, 107, 147)");
            }else if(curChart>=82){
                area.find(".percent0,.percent25").css("background","#0976d9");
                area.find(".end,.percent75,.percent50").css("background-color","rgb(102, 107, 147)");
            }else{
                area.find(".percent0").css("background","#0976d9");
                area.find(".end,.percent75,.percent50,.percent25").css("background-color","rgb(102, 107, 147)");
            }
        }else {
            area.find(".progress").css("width",0);
            area.find(".st-slider-button").css("left",0);
            area.next("div").find("p:last-child").html("0%");
            area.find(".percent0,.percent25,.percent50,.percent75,.end").css("background-color","rgb(102, 107, 147)");
        }
        // 计算总价
        var money=parseFloat((current*price)).toFixed(l);
        // console.log(parseFloat(money));
        if($(".buyDiv .limitPrice").is(":visible")){
            if(isNaN(money)){
                $("#buy_money").html("0");
            }else{
                // 乘积精度问题需要解决
                $("#buy_money").html(money);
                // $("#buy_money").html(multiplication($('#buy_num').val(),$("#buy_price").val()));
            }
            return false
        }else if($(".sellDiv .limitPrice").is(":visible")){
            if(isNaN(money)){
                $("#sell_money").html("0");
            }else{
                $("#sell_money").html(money);
            }
        }
    }
     
    //
    // function multiplication(arg1,arg2){
    //     var m=0,s1=arg1.toString(),s2=arg2.toString();
    //     try{m += s1.split(".")[1].length}catch(e){}
    //     try { m += s2.split(".")[1].length}catch(e){}
    //     return Number(s1.replace(".",""))*Number(s2.replace(".",""))/Math.pow(10,m);
    // }

    // 当前委托
    function getTradelogNew(){
       
        $.getJSON("/Ajax/getEntrustAndUsercoin?market=" + market + "&t=" + Math.random(), function (data) {
            //console.log(data['entrust'])
        if (data) {
            // console.log(data)
            
            if (data['usercoin']) {
                if (data['usercoin']['cny']) {
                    $("#my_rmb").html(data['usercoin']['cny']);
                    $("#my_xnb").html(data['usercoin']['xnb']);
                    keyPrice($("#buy_price"),$('#my_rmb'),$('#buy_max'));
                    keyPrice($("#buy_price1"),$('#my_rmb'),$('#buy_max1'));
                    keyPrice($("#sell_price"),$('#my_xnb'),$('#sell_max'));
                    keyPrice($("#sell_price1"),$('#my_xnb'),$('#sell_max1'));

                    // if($("#buy_price").val() == '' || $("#buy_price").val() == 0){
                    //     $('#buy_max').html(0);
					// }else{
                    //     $('#buy_max').html((Number($('#my_rmb').html()) / Number($("#buy_price").val()) + Number($("#ask_fee").html())).toFixed(8));
					// }
                }
                // else {
                //     $("#my_rmb").html('0.00');
                //     $('#buy_max').html('0');
                // }

                // if (data['usercoin']['cnyd']) {
                //     $("#my_rmbd").html(data['usercoin']['cnyd']);
                // } else {
                //     $("#my_rmbd").html('0.00');
                // }

                // if (data['usercoin']['xnb']) {
                //     $("#my_xnb").html(data['usercoin']['xnb']);
                //     if($('#sell_price').val() == '' || $('#sell_price').val() == 0){
                //         $('#sell_max').html(0);
				// 	}else{
                //         $('#sell_max').html((Number($("#my_xnb").html()) * Number($('#sell_price').val()) - Number($('#bid_fee').html())).toFixed(8));
				// 	}
                //
                //     //console.log(Number($("#my_xnb").html()),Number($('#sell_price').val()),Number($('#bid_fee').html()))
                // } else {
                //     $("#my_xnb").html('0.00');
                //     $('#sell_max').html('0');
                // }
                //
                // if (data['usercoin']['xnbd']) {
                //     $("#my_xnbd").html(data['usercoin']['xnbd']);
                // } else {
                //     $("#my_xnbd").html('0.00');
                // }
            }
            

            if (data['entrust']) {
                //console.log('habcesf');
                var list = '';
                var type = '';
                var totalprice = '';
                var dataL = data['entrust'].length;
                //console.log('dataL='+dataL);
                if(dataL>=1){
                	for (var i = 0; i < dataL; i++) {
                        if(data['entrust'][i]['type'] == '2'){
                            //type = "{$GLOBALS['Sell']}";
                            type = "{$GLOBALS['sell']}";
                            classColor = "green";
                        }else{
                            //type = "{$GLOBALS['buy']}";
                            type = "{$GLOBALS['buy']}";
                            classColor = "red";
                        }
                        
                        totalprice = Number(data['entrust'][i]['price'])+Number(data['entrust'][i]['num']);
                        // console.log(data['entrust'][i]['addtime'])
                        var ss=data['entrust'][i]['num']-data['entrust'][i]['deal'];
                        //ssbb
                        
                        list += '<tr>&lt;!&ndash;&ndash;&gt;<td class="buy"><span>'+data['entrust'][i]['addtime']+
                        '</span></td><td><span>'+"{$Think.get.market}"+
                        '</span></td><td><span class="'+classColor+'">'+type+
                        '</span></td><td><span>'+ data['entrust'][i]['price']+
                        '</span></td><td><span>'+ data['entrust'][i]['num']+
                        '</span></td><td><span>'+ss+
                        '</span></td><td><span>{$GLOBALS['unsettled']}</span></td><td><span class="cancel-single" data-id='+data['entrust'][i]['id']+'>'+
                        '撤销'+'</span></td></tr>'
                    }
                    $(".zhu-content0").html(list);
                        if($('.cancel-single')){
                            $('.cancel-single').on('click', function(){
                                //$(".cancelPopup").show();
                                 var index = $(this).index();
                                 var dataId = $(this).attr('data-id');
                                 cancelaa(dataId);

                            })
                        }
                    }

                }else{
                    $(".current-list").find(".scroll").hide().next(".no-list").show();

                }
            }
        });
        setTimeout('getTradelogNew()', 3000);
    }
    //当前委托

    //历史委托
    function getTradelogNewH(){
        $.getJSON("/Trade/getTradels/market/" + market + "&t=" + Math.random()+ "&trade_pt="+'1', function (data) {
        if (data) {
            var list = '';
            var type = '';
            var totalprice = '';
            var dataL = data.length;
      		var dataStatus = '';
      		//console.log('dataL='+dataL);
                for (var i = 0; i < dataL; i++) {
                    var dataNum = data[i]['num'];
                    var dataTime = timeChage(data[i]['addtime']);
                    var dataPrice = data[i]['price'];
                    var dealNum = data[i]['deal'];
                    if (data[i]['type'] == '2') {
                        type = "{$GLOBALS['sell']}";
                        classColor = "green";
                    } else {
                        type = "{$GLOBALS['buy']}"
                        classColor = "red";
                    }
                    //console.log(data[i]['status']);
                    if (data[i]['status'] == 1) {
                        dataStatus = "{$GLOBALS['completed']}";
                        var dataNum = data[i]['num'];
                    }
                    if (data[i]['status'] == 0) {
                        dataStatus = "{$GLOBALS['trading']}";
                        var dataNum = (data[i]['num'] - data[i]['deal']).toFixed(8);

                    }
                    if (data[i]['status'] == 2) {
                        dataStatus = "{$GLOBALS['canceled']}";
                        var dataNum = (data[i]['num'] - data[i]['deal']).toFixed(8);
                        dataDeal = "{$GLOBALS['completed']}";
                        var dealNum = data[i]['deal'];
                    }


                    // if(data[i]['status'] != 2 || data[i]['deal']==0){
                    //   list += '<tr class="zhu-header"><td>'+dataTime+'</td><td>'+ type +'</td><td class="'+classColor+'">'+ dataPrice+'</td><td>'+ dataNum+'</td><td class="cancle-click" data-id='+data[i]['id']+'>'+ dataStatus +'</td></tr>';
                    // }
                    // if(data[i]['status'] == 2 && data[i]['deal']>0){
                    list += '<tr><td><span>' + dataTime + '</span></td><td><span>' + data[i]['market'] + '</span></td><td><span class="' + classColor + '">' + type + '</span></td><td><span>' + dataPrice + '</span></td><td><span>' + dataNum + '</span></td><td><span>' + dealNum + '</span></td><td><span>' + dataStatus + '</span></td>';
                    // }

                }
            $(".zhu-content1").html(list);

            }else{
                $(".history-list").find(".scroll").hide().next(".no-list").show();

            }

            // if($('.cancle-click')){

            // $('.cancle-click').on('click', function(){
            //   var index = $(this).index();
            //   var dataId = $(this).attr('data-id');
            //   cancelaa(dataId);
            // }

 
        });
        setTimeout('getTradelogNewH()', 3000);
    };
    
    //撤销
    function cancelaa(id) {
        layer.confirm('确认撤销?', {title:'确认撤销'}, function(index){
            layer.close(index);
        $.post("{:U('Trade/chexiao')}", {id: id}, function (data) {
            if (data.status == 1) {
                getEntrustAndUsercoin();
                layer.msg(data.info, {icon: 1});
                window.location.reload();
            } else {
                layer.msg(data.info, {icon: 2});
                window.location.reload();
            }
        });
        });
    }
    var trans_lock = 0;
    
    //买入
    function tradeadd_buy() {

        // if (trans_lock) {
        //     layer.msg('不要重复提交', {icon: 2});
        //     return;
        // }
        
  //do something
  
//   layer.close(index);

        trans_lock = 1;
        var tradeType = $(".priceType>div.active").index()+1;
        //alert(tradeType);
        var tradeSendData;
        if(tradeType == 1){
            //alert($('#buy_price').val(),$('#buy_num').val());
            if ($('#buy_price').val() == "" || $('#buy_price').val() == 0) {
                layer.tips("{$GLOBALS['place-price']}", '#buy_price', {tips: 3});
                // $('#buy_price').next("div").addClass("error").show();
                return false;
            }
            if ($('#buy_num').val() == "" || $('#buy_num').val() == '0') {
                layer.tips("{$GLOBALS['place-number']}", '#buy_num', {tips: 3});
                // $('#buy_num').next("div").addClass("error").show();
                return false;
            }
            tradeSendData = {
                price: $('#buy_price').val(),
                num: $('#buy_num').val(),
                paypassword: $('#buy_paypassword').val(),
                market: market,
                type: 1,
                tradetype:1,
                trade_pt:1
            };
		}else{
            //console.log(2)
            if ($('#buy_num1').val() == "" || $('#buy_num1').val() == 0) {
                layer.tips("{$GLOBALS['place-number']}", '#buy_num1', {tips: 3});
                return false;
            }

            tradeSendData = {
                num: $('#buy_num1').val(),
                paypassword: $('#buy_paypassword').val(),
                market: market,
                type: 1,
                tradetype: 2,
                trade_pt:1
            }
		}
		//console.log(tradeSendData)
        //var price = parseFloat($('#buy_price').val());
        //var num = parseFloat($('#buy-num').val());
        //var paypassword = $('#buy_paypassword').val();
        if($('#buy_paypassword').val() == ''){
            layer.tips("{$GLOBALS['place-financePwd']}", '#buy_paypassword', {tips: 3});
            return false;
        }

        //加载层-风格3
        
        //alert(tradeSendData);

        //此处演示关闭
        // setTimeout(function () {
        //     layer.closeAll('loading');
        //     trans_lock = 0;
        // }, 10000);
        layer.confirm('确认买入?', {title:'确认买入'}, function(index){
            layer.load(2);
        $.post("{:U('Trade/upTrade')}", tradeSendData, function (data) {
            //console.log(data)
            layer.closeAll('loading');
            trans_lock = 0;
            // console.log(data)
            if (data.status == 1) {
                // $("#buy_price").val('');
                $("#buy_num").val('0');
                $("#buy_mum").val('0');
                // $("#sell_price").val('');
                // $("#sell_num").val('');
                layer.msg(data.info, {icon: 1});
            } else {
                layer.msg(data.info, {icon: 2});
            }
        }, 'json');
        });
    }
    
    
    // 卖出
    function tradeadd_sell() {
        // if (trans_lock) {
        //     layer.msg('不要重复提交', {icon: 2});
        //     return;
        // }
        trans_lock = 1;
        var tradeType = $(".priceType>div.active").index()+1;
        
        var tradeSendData;
        if(tradeType == 1){
            if ($('#sell_price').val() == "" || $('#sell_price').val() == 0) {
                layer.tips("{$GLOBALS['place-price']}", '#sell_price', {tips: 3});
                return false;
            }
            if ($('#sell_num').val() == "" || $('#sell_num').val() == 0) {
                layer.tips("{$GLOBALS['place-number']}", '#sell_num', {tips: 3});
                return false;
            }
            tradeSendData = {
                price: $('#sell_price').val(),
                num: $('#sell_num').val(),
                paypassword: $('#sell_paypassword').val(),
                market: market,
                type: 2,
                tradetype: 1,
                trade_pt:1
            };
        }else{
            if ($('#sell_num1').val() == "" || $('#sell_num1').val() == 0) {
                layer.tips("{$GLOBALS['place-number']}", '#sell_num', {tips: 3});
                return false;
            }
            tradeSendData = {
                num: $('#sell_num1').val(),
                paypassword: $('#sell_paypassword').val(),
                market: market,
                type: 2,
                tradetype: 2,
                trade_pt:1
            };
        }
        ///var price = parseFloat($('#sell_price').val());
        //var num = parseFloat($('#sell_num').val());
        //var paypassword = $('#sell_paypassword').val();
        if ($('#sell_paypassword').val() == "") {
            layer.tips("{$GLOBALS['place-financePwd']}", '#sell_paypassword', {tips: 3});
            return false;
        }
        
        //此处演示关闭
        // setTimeout(function () {
        //     layer.closeAll('loading');
        //     trans_lock = 0;
        // }, 10000);

    layer.confirm('确认卖出?', {title:'确认卖出'}, function(index){
        layer.load(2);
        $.post("{:U('Trade/upTrade')}", tradeSendData, function (data) {
            layer.closeAll('loading');
            trans_lock = 0;
            if (data.status == 1) {
                // $("#buy_price").val('');
                // $("#buy_num").val('0');
                // $("#sell_price").val('');
                $("#sell_num").val('0');
                $("#sell_mum").val('0');
                layer.msg(data.info, {icon: 1});
            } else {
                layer.msg(data.info, {icon: 2});
            }
        }, 'json');
        });
    }
    //时间戳转日期函数
    function timeChage(time){
        var date = new Date(time*1000);
        var M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';
        var D = date.getDate();
        var h = date.getHours();
        var m = date.getMinutes();
        var s = date.getSeconds();
        var dayL = String(date.getDate()).length;
        var dayH = String(date.getHours()).length;
        var dayM = String(date.getMinutes()).length;
        var dayS = String(date.getSeconds()).length;
        if(dayL == 1){
            D = "0"+D;
        }
        if(dayH == 1){
            h = "0"+h;
        }
        if(dayM == 1){
            m = '0' + m;
        }
        if(dayS == 1){
            s = '0' + s;
        }
        return (M+D+" "+h+":"+m+":"+s+"")
    }
    //时间戳转日期函数


/*当前币种*/
    var str = window.location.href;
    var index = str .lastIndexOf("\/");
    str  = str .substring(index + 1, str .length);
    var str = str.split("_")[1];
   if(str=="jeff"){
       $(".coinType a").removeClass("active");
       $(".coinType a:first-child").addClass("active");
       $('.new-data-usdt').hide();
       $('.new-data-btc').hide();
       $('.new-data-bb').show();
	   $('.new-data-eth').hide();

   }else if(str=="usdt"){
       $(".coinType a").removeClass("active");
       $(".coinType a:nth-child(2)").addClass("active");
       $('.new-data-usdt').show();
       $('.new-data-btc').hide();
       $('.new-data-bb').hide();
	   $('.new-data-eth').hide();
   }else if(str=="btc"){
       $(".coinType a").removeClass("active");
       $(".coinType a:nth-child(3)").addClass("active");
       $('.new-data-usdt').hide();
       $('.new-data-btc').show();
       $('.new-data-bb').hide();
	   $('.new-data-eth').hide();
   }else if(str=="eth"){
   
       $(".coinType a").removeClass("active");
       $(".coinType a:nth-child(4)").addClass("active");
       $('.new-data-usdt').hide();
       $('.new-data-btc').hide();
       $('.new-data-bb').hide();
	   $('.new-data-eth').show();
   }



    // 最高价
    var newBiLei;
    var newPriceZhu;
    function getMaxPrice(){
	var market_bz = $('#market_bz').val();
	var bz_coin = market_bz + '_cny';
        $.getJSON("/Ajax/getJsonTop?market="+market+"&t=" + Math.random(), function (data) {
            //console.log(data['info']);
            if(data['info']){
                $('#market_new_price').removeClass('red');
                $('#market_new_price').removeClass('green');

                $('#orderbook_last_rate').html(data['info']['new_price']);
                if(data['info']['new_price']){
                    $('#market_new_price').html(data['info']['new_price']);
					
					$('#cny_prices').html(data['info'][bz_coin]['cny_prices'] * data['info']['new_price']);
                    newPriceZhu = data['info']['new_price'];
                }else{
                    $('#market_new_price').html(0);
                }

                if (data['info']['volume'] > 10000) {
                    data['info']['volume'] = (data['info']['volume'] / 10000).toFixed(2) + "万"
                }
                if (data['info']['volume'] > 100000000) {
                    data['info']['volume'] = (data['info']['volume'] / 100000000).toFixed(2) + "亿"
                }
                if(data['info']['volume']){
                    $("#market_volume").html(data['info']['volume']);
                }else{
                    $("#market_volume").html(0);
                }

                $('#market_change').removeClass('red');
                $('#market_change').removeClass('green');
                if (data['info']['change'] > 0) {
                    $('#market_change').addClass('green');
                    $("#market_new_price").closest("div").find("span").addClass('green');
                } else if(data['info']['change'] < 0)  {
                    $('#market_change').addClass('red');
                    $("#market_new_price").closest("div").addClass('red');
                }
                if(data['info']['change']){
                    $("#market_change").html(data['info']['change'] + "%");
                }else{
                    $("#market_change").html(0).css("color","#fff");
                }

                //}
            }
            if(data['list']){
                //console.log(data['list'])
                // newBiLei = data['list'];
                // console.log(newBiLei)
            }

        });
        setTimeout('getMaxPrice()',1000);
    }

    /*右侧档位数据列表*/
    function getDepth() {
        $.getJSON("/Ajax/getDepth?market=" + market + "&t=" + Math.random(), function (data) {
            if (data) {
                // console.log(data)
                if (data['depth']) {
                    var list = '';
                    var sellk = data['depth']['sell'].length;
                    var inputData = [];
                    if (sellk>0) {
                        for (i = 0; i < data['depth']['sell'].length; i++) {
                            list += '<tr class="tr"><td data-id="price" class="sell">'+ data['depth']['sell'][i][0] +'</td><td data-id="volume" style="color:rgb(203,215,240)">'+ data['depth']['sell'][i][1] +'</td><td data-id="total">'+ (Number(data['depth']['sell'][i][0]) * Number(data['depth']['sell'][i][1])).toFixed(6) +'</td></tr>';
                            // var inputDataSmall = [];
                            // inputDataSmall.push(data['depth']['sell'][i][0]);
                            // inputDataSmall.push(data['depth']['sell'][i][1]);
                            // inputData.push(inputDataSmall);
                        }
                        $("#ul-ask-list1").html(list);
                    }



                    // 点击自动填充价格
                    $('#ul-ask-list1 tr').on('click', function(){
                        var curPrice =$('#ul-ask-list1 tr td:first-child').html();
                        if($(".buyDiv .limitPrice").is(":visible")){
                            $("#buy_price").val(curPrice);
                            keyPrice($("#buy_price"),$('#my_rmb'),$('#buy_max'))

                        }else  if($(".sellDiv .limitPrice").is(":visible")){
                            $("#sell_price").val(curPrice);
                            keyPrice($("#sell_price"),$('#my_xnb'),$('#sell_max'))
                        }
                    });


                    var transform =
                        list = '';
                    var buyL = data['depth']['buy'].length;
                    var inputDataBuy = [];
                    if (buyL>0) {
                        for (i = 0; i < buyL; i++) {
                            list += '<tr class="bottom-content tr"><td data-id="price" class="buy">'+ data['depth']['buy'][i][0] +'</td><td data-id="volume" style="color:rgb(203,215,240)">'+ data['depth']['buy'][i][1] +'</td><td data-id="total">'+ (Number(data['depth']['buy'][i][0]) * Number(data['depth']['buy'][i][1])).toFixed(6) +'</td></tr>';
                            // var inputDataBuy1 = [];
                            // inputDataBuy1.push(data['depth']['buy'][i][0]);
                            // inputDataBuy1.push(data['depth']['buy'][i][1]);
                            // inputDataBuy.push(inputDataBuy1);
                        }
                        $("#ul-bid-list1").html(list);
                    }

                }

            }
        });
       // clearInterval(getDepth_tlme);

        var wait = second = 3;
        var getDepth_tlme = setInterval(function () {
            wait--;
            if (wait < 0) {
                clearInterval(getDepth_tlme);
                //getDepth();
                wait = second;
            }
        }, 1000);

    }

/*滚动条*/
    $(function(){
        $(".scroll").panel({iWheelStep:32});
    });


    /*禁止鼠标滚动*/
    $("input").bind('mousewheel', function(event, delta) { return false; });


    // 限制input输入框输入
    function clearNoNum(obj)
    {
//先把非数字的都替换掉，除了数字和.
        $(obj)[0].value = $(obj)[0].value.replace(/[^\d.]/g,"");
//必须保证第一个为数字而不是.
        $(obj)[0].value = $(obj)[0].value.replace(/^\./g,"");
//保证只有出现一个.而没有多个.
        $(obj)[0].value = $(obj)[0].value.replace(/\.{2,}/g,".");
//保证.只出现一次，而不能出现两次以上
        $(obj)[0].value = $(obj)[0].value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");

    }



      

</script>
<script type="text/javascript">
		
			function getParameterByName(name) {
				name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
				var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
					results = regex.exec(location.search);
				return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
			}
		var K_market = $('#K_market').val();//当前交易对，格式大写，如BTC_USDT
	
	if(K_market == '' || K_market == undefined){
		K_market = 'BTC_USDT';
	}
		  function initOnReady() {
					var widget = new TradingView.widget({
						debug: false, //查看的库图表错误和警告
						fullscreen: false,//全屏幕
						symbol:K_market,//币种信息
						interval: '1',//默认时间
						container_id: "tv_chart_container",
						//	BEWARE: no trailing slash is expected in feed URL
						datafeed: new Datafeeds.UDFCompatibleDatafeed("http://58coin.io/wap/ajaxmarket"),
						library_path: "__PUBLIC__/Home/charting_library/",
						locale: "zh",//语言
						allow_symbol_change: true,
						timezone:'Asia/Shanghai',//时区
						theme: 'Dark',//为图表添加自定义主题颜色
						favorites: {
							intervals: ["1", "5", "15", "30", "1H"],
							chartTypes: ["Area", "Line"]
						},
						width : "100%",    //图表宽度
						height : "735px",    //图表高度
						disabled_features: ["save_chart_properties_to_local_storage", "volume_force_overlay"],//禁用
						//可用
						enabled_features: [
						  "left_toolbar",
						  "dont_show_boolean_study_arguments",
						  "use_localstorage_for_settings",
						  "remove_library_container_border",
						  "save_chart_properties_to_local_storage",
						  "side_toolbar_in_fullscreen_mode",
						  "hide_last_na_study_output",
						  "constraint_dialogs_movement",//todo: nie do końca jestem pewien
						  "header_settings",
						  "edit_buttons_in_legend",
						  "move_logo_to_main_pane", 
						],
						time_frames: [
							{text: "1y", resolution: "1W"},
							{text: "6m", resolution: "3D"},
							{text: "3m", resolution: "1D"},
							{text: "1m", resolution: "1D"},
							{text: "1w", resolution: "30"},
							{text: "3d", resolution: "30"},
							{text: "1d", resolution: "30"},
							{text: "6h", resolution: "15"},
							{text: "1h", resolution: "1"}
						],
						//preset: "mobile",
						overrides:{
							"volume.volume.color.0": "#ff5353",
							"volume.volume.color.1": "#00b07c",
							"volume.volume.transparency": "53",
							"volume.show ma": !0,
							"volume.volume ma.plottype": "line"
						},
						studies_overrides: {
							"volume.volume.color.0": "#ff5353",
							"volume.volume.color.1": "#00b07c",
							"volume.volume.transparency": "53",
							"volume.show ma": !0,
							"volume.volume ma.plottype": "line"
						},    //线条样式的重载
						toolbar_bg:'#141625', // 工具栏背景颜色
						loading_screen: { backgroundColor: '#141625',foregroundColor:'#141625' }, // 加载背景 加载图标背景颜色  没找到隐藏方式，这样隐藏
						
						
						customFormatters: {
						  dateFormatter: {
							format: function(date) { return date.getUTCFullYear() + '-' + date.getUTCMonth() + '-' + date.getUTCDate(); }
						  },
						}
				});
				
				widget.onChartReady(function(){
					widget.chart().createStudy("Moving Average", !1, !0, [7], null, {
						"Plot.color": "#43bedc",
						"Plot.linewidth": 2
					}),
					widget.chart().createStudy("Moving Average", !1, !0, [30], null, {
						"Plot.color": "#eebb93",
						"Plot.linewidth": 2
					})
				});
			};

			window.addEventListener('DOMContentLoaded', initOnReady, false);
		</script>

<script>
var ws_url = 'wss://api.zb.cn/websocket';
var K_markets ="{$data.s1}{$data.s2}";//当前交易对，格式大写，如BTC_USDT
	
	if(K_markets == '' || K_markets == undefined){
		K_markets = 'btcusdt';
      
	}
var Room={
	socket: null,
	uid: 0,
	users: [],
	pingInterval: 0,
	init:function(){
		// 创建一个Socket实例
		this.socket = new WebSocket(ws_url);
		this.socket.onopen = function(event){
			Room.send({
				'event' : 'addChannel',
				'channel' : K_markets+'_trades',
			});
			
			//监听消息
			this.socket.onmessage = function(event){
				var data = $.parseJSON(event.data);
				console.log(data);
                 var list = "";
                 for(var i=0;i<data.data.length;i++){
                   if(data.data[i].trade_type == 'ask'){
                       list += '<tr class="tr"><td data-id="price" class="sell">'+ data.data[i].price +'</td><td data-id="volume" style="color:rgb(203,215,240)">'+ data.data[i].amount +'</td><td data-id="total">'+ timestampToTime(data.data[i].date) +'</td></tr>';
                      $("#ul-ask-list1").html(list);
                      }else{
                      
                       list += '<tr class="tr"><td data-id="price" class="buy">'+ data.data[i].price +'</td><td data-id="volume" style="color:rgb(203,215,240)">'+ data.data[i].amount +'</td><td data-id="total">'+ timestampToTime(data.data[i].date) +'</td></tr>';
                         $("#ul-bid-list1").html(list);
                      }
                   
                  
                 }
                        
                 
				
			}.bind(this);
			// 监听Socket的关闭
			this.socket.onclose = function(event) {
				if(this.pingInterval) clearInterval(this.pingInterval);
				$('.alert').show();
				console.log('Client notified socket has closed', event);
			}.bind(this);
		}.bind(this);
	},
	send: function(e) {
		// console.info('发送:', e);
		this.socket.send(JSON.stringify(e));
	},
	
};

Room.init();
   function timestampToTime(timestamp) {
        var date = new Date(timestamp * 1000);//时间戳为10位需*1000，时间戳为13位的话不需乘1000
        //Y = date.getFullYear() + '-';
       // M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';
       // D = date.getDate() + ' ';
        h = date.getHours() + ':';
        m = date.getMinutes() + ':';
        s = date.getSeconds();
        return h+m+s;
    }
</script>

</html>