PD9waHANCm5hbWVzcGFjZSBIb21lXENvbnRyb2xsZXI7DQoNCmNsYXNzIEMyY0NvbnRyb2xsZXIgZXh0ZW5kcyBIb21lQ29udHJvbGxlciB7DQogICANCiAgICAvL0MyQ+WIl+ihqA0KICAgIHB1YmxpYyBmdW5jdGlvbiBpbmRleCgpDQoJew0KCQ0KICAgIAkkdWlkPXVzZXJpZCgpOwkNCgkJaWYgKGlzc2V0KCR1aWQpKXsNCiAgICAgICAgICAgICR1c2VyID0gTSgnVXNlcicpLT53aGVyZShhcnJheSgnaWQnID0+IHVzZXJpZCgpKSktPmZpbmQoKTsNCiAgICAgICAgICAgICRzdGF0ID0gJHVzZXJbJ2lzc2hvcCddOw0KICAgICAgICAgICAgJHRoaXMtPmFzc2lnbigndXNlcicsJHVzZXIpOw0KICAgICAgICAgICAgJHRoaXMtPmFzc2lnbignc3RhdCcsICRzdGF0KTsNCiAgICAgICAgfQ0KICAgICAgICAkdWNvaW49TSgnYzJjX3RyYWRlJyktPndoZXJlKCdpc19jYW5jZWw9MCBhbmQgaXNfcGF5PTAgYW5kIHJlc2lkdWU+MCcpLT5vcmRlcigiaWQiKS0+Z3JvdXAoJ3R5cGUnKS0+c2VsZWN0KCk7DQogICAgICAgICR0aGlzLT5hc3NpZ24oJ3Vjb2luJywkdWNvaW4pOw0KICAgICAgICANCiAgICAgICAgDQovKiAgICAgICAgaWYoJHVpZD4wKXsgDQogICAgICAgICAgICAvLyAkdHlwZT1JKCdnZXQudHlwZScpOw0KICAgICAgICAgICAgLy8gJHN0YXR1cz1JKCdnZXQuc3RhdHVzJyk7DQogICAgICAgICAgICAgICAgJHdoZXJlMlsnc2lkJ109JHVpZDsNCiAgICAgICAgICAgICAgICAkd2hlcmUyWydpc19wYXknXT0xOw0KICAgICAgICAgICAgICAgICR3aGVyZTNbJ2JpZCddPSR1aWQ7DQogICAgICAgICAgICAgICAgJHdoZXJlM1snaXNfcGF5J109MTsNCiAgICAgICAgICAgICAgICAkYzJjc2VsID0gTSgnYzJjX3RyYWRlJyktPndoZXJlKCR3aGVyZTIpLT5zZWxlY3QoKTsNCiAgICAgICAgICAgICAgICAkYzJjYnV5ID0gTSgnYzJjX3RyYWRlJyktPndoZXJlKCR3aGVyZTMpLT5zZWxlY3QoKTsNCiAgICAgICAgICAgICAgICAkdGhpcy0+YXNzaWduKCdjMmNzZWwnLCAkYzJjc2VsKTsNCiAgICAgICAgICAgICAgICAkdGhpcy0+YXNzaWduKCdjMmNidXknLCAkYzJjYnV5KTsNCiAgICAgICAgfQ0KKi8JDQogICAgJHRoaXMtPmRpc3BsYXkoKTsNCgl9DQogICANCiAgICANCiAgICAvL0MyQ+S5sOWNluS4reW/gyDmmoLml6Dkvb/nlKgNCiAgICBwdWJsaWMgZnVuY3Rpb24gc2hvcCgpew0KICAgICAgICBpZiAoIXVzZXJpZCgpKSB7DQogICAgICAgICAgICByZWRpcmVjdCgnLyNsb2dpbicpOw0KICAgICAgICB9DQogICAgICAgICR0cmFkZT1NKCdjMmNfdHJhZGUnKTsNCiAgICAgICAgICAgICRtYXBbJ2lzX3BheSddPTA7DQogICAgICAgICAgICAkbWFwWydyZXNpZHVlJ109YXJyYXkoJ2d0JywwKTsNCiAgICAgICAgDQogICAgICAgICRzPTE7DQogICAgICAgIGlmKCRzPT0xKXsNCiAgICAgICAgICAgICRtYXBbJ3R5cGUnXT0xOw0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICRtYXBbJ3R5cGUnXT0yOw0KICAgICAgICB9DQogICAgICAgICRjb3VudD0kdHJhZGUtPndoZXJlKCRtYXApLT5zZWxlY3Q7DQogICAgICAgICRQYWdlPSBuZXcgXFRoaW5rXFBhZ2UoJGNvdW50LDEwKTsNCiAgICAgICAgJHNob3c9ICRQYWdlLT5zaG93KCk7IA0KICAgICAgICAkbGlzdCA9ICR0cmFkZS0+d2hlcmUoJG1hcCktPm9yZGVyKCdhZGR0aW1lIERFU0MnKS0+bGltaXQoJFBhZ2UtPmZpcnN0Um93LicsJy4kUGFnZS0+bGlzdFJvd3MpLT5zZWxlY3QoKTsNCiAgICAgICAgJHRoaXMtPmFzc2lnbignbGlzdCcsJGxpc3QpOw0KICAgICAgICAkdGhpcy0+YXNzaWduKCdwYWdlJywkc2hvdyk7DQogICAgICAgICR0aGlzLT5kaXNwbGF5KCk7IA0KICAgIH0NCiAgICANCiAgICAvL+aTjeS9nOS5sOWFpeiuouWNlQ0KICAgIHB1YmxpYyBmdW5jdGlvbiBidXlhYygpew0KDQogICAgICAgIGlmICghdXNlcmlkKCkpIHsNCiAgICAgICAgICAgIHJlZGlyZWN0KCcvI2xvZ2luJyk7DQogICAgICAgIH0NCiAgICAgICAgJG51bWJlcj0xMDA7ICAgICAgICAgICAgICAgICAgICAgICAgLy/lvZPliY3nlKjmiLfljZblh7rmlbDph4/ojrflvpcNCiAgICAgICAgJHVpZD11c2VyaWQoKTsgICAgICAgICAgICAgICAgICAgICAgLy/lvZPliY3nlKjmiLdJRA0KICAgICAgICAkYnV5aWQ9SSgnZ2V0LmJ1eWlkJyk7ICAgICAgICAgICAgICAvL+S5sOWutklEDQogICAgICAgICRpZD1JKCdnZXQuaWQnKTsgICAgICAgICAgICAgICAgICAgIC8v6K6i5Y2VSUQNCg0KICAgICAgICAkdHJhZGU9TSgnYzJjX3RyYWRlJyktPndoZXJlKCJpZD0iLiRpZCktPmZpbmQoKTsNCiAgICAgICAgJHVjb2luPU0oJ3VzZXJfY29pbicpLT53aGVyZSgidXNlcmlkPSIuJHVpZCktPmdldEZpZWxkKCd1c2R0Jyk7DQoNCg0KDQogICAgICAgIGlmKCR1aWQ9PSRidXlpZCl7DQogICAgICAgICAgICAkdGhpcy0+ZXJyb3IoIuS4jeiDveWMuemFjeiHquW3seeahOiuouWNlSIpOw0KICAgICAgICAgICAgZXhpdDsNCiAgICAgICAgfQ0KICAgICAgICAgICAgJGludGVyZXN0PTA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6LCD55SoQzJD5ZCO5Y+w6K6+572u5Lqk5piT5Yip5oGvDQogICAgICAgIGlmKCR1Y29pbjwoJHRyYWRlWydyZXNpZHVlJ10rJGludGVyZXN0KSl7DQogICAgICAgICAgICAkdGhpcy0+ZXJyb3IoIui0puWPt3VzZHTmlbDph4/kuI3mu6HotrMs6K+35YWF5YC8Iik7DQogICAgICAgICAgICBleGl0Ow0KICAgICAgICB9DQoNCiAgICAgICAgaWYoJHRyYWRlWydtaW5udW0nXTw9JHRyYWRlWydyZXNpZHVlJ10peyAgICAgICAgICAgIC8vbWlubnVt5pyA5bCP5oiQ5Lqk6YePICAgLy9yZXNpZHVl6K6i5Y2V5Ymp5L2Z5oiQ5Lqk6YePDQoNCiAgICAgICAgICAgIGlmKCRudW1iZXI8JHRyYWRlWydtaW5udW0nXSl7DQogICAgICAgICAgICAgICAgJHRoaXMtPmVycm9yKCfmnIDkvY7miJDkuqTph5Hpop3kuLonLiR0cmFkZVsnbWlubnVtJ10pOw0KICAgICAgICAgICAgICAgIGV4aXQ7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgICBpZigkbnVtYmVyIT0kdHJhZGVbJ3Jlc2lkdWUnXSl7DQogICAgICAgICAgICAgICAgJHRoaXMtPmVycm9yKCforqLljZXmiJDkuqTph5Hpop3kuLonLiR0cmFkZVsncmVzaWR1ZSddKTsNCiAgICAgICAgICAgICAgICBleGl0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgLyogICAgaWYoJHRyYWRlWydpc19sb2NrJ109PTEpew0KICAgICAgICAgICAgJHRoaXMtPmVycm9yKCLlhbbku5bnlKjmiLfmraPlnKjkuqTmmJPmraTorqLljZXvvIzor7fnqI3lkI7lho3or5UiKTsNCiAgICAgICAgICAgIGV4aXQ7DQogICAgICAgIH0qLw0KICAgICAgICAvL+eUn+aIkOWtkOiuouWNlQ0KICAgICAgICAgICAgICAgICRjb2RlX251bT0iQiIucmFuZCgxMDAwMDAwMDAsOTk5OTk5OTk5KS50aW1lKCk7CQ0KICAgICAgICAgICAgICAgICR1c2VyPU0oJ3VzZXInKS0+d2hlcmUoJ2lkPScuJHVpZCktPmZpbmQoKTsNCiAgICAgICAgICAgICAgICAkZGF0YVsnbnVtYmVyJ109JGNvZGVfbnVtOw0KICAgICAgICAgICAgICAgICRkYXRhWydtYXJrZXQnXT0ndXNkdCc7DQogICAgICAgICAgICAgICAgJGRhdGFbJ3NpZCddPSR1aWQ7DQogICAgICAgICAgICAgICAgJGRhdGFbJ3ByaWNlJ109JHRyYWRlWydwcmljZSddOw0KICAgICAgICAgICAgICAgICRkYXRhWydjcHJpY2UnXT1yb3VuZCgkdHJhZGVbJ3ByaWNlJ10qJG51bWJlciw4KTsNCiAgICAgICAgICAgICAgICAkZGF0YVsnbnVtJ109JG51bWJlcjsNCiAgICAgICAgICAgICAgICAkZGF0YVsndHlwZSddPTI7ICAgICAgICAgICAgICAgIC8v5Li76K6i5Y2V5Lmw5YWlMe+8jOWtkOiuouWNleWNluWHujINCiAgICAgICAgICAgICAgICAkZGF0YVsnaXNzaG9wJ109JHVzZXJbJ2lzc2hvcCddOw0KICAgICAgICAgICAgICAgICRkYXRhWydyZW1hcmsnXT0iQzJD5Lqk5piTLeS4u+WKqOWNluWHui3luILlnLpVU0RUIjsNCiAgICAgICAgICAgICAgICAkZGF0YVsnYWRkdGltZSddPSR0cmFkZVsnYWRkdGltZSddOw0KICAgICAgICAgICAgICAgICRkYXRhWydwYXl0aW1lJ109dGltZSgpOw0KICAgICAgICAgICAgICAgICRkYXRhWydiaWQnXT0kdHJhZGVbJ2JpZCddOw0KICAgICAgICAgICAgICAgICRkYXRhWydpc19wYXknXT0xOw0KICAgICAgICAgICAgICAgICRkYXRhWydpc19jYW5jZWwnXT0wOw0KICAgICAgICAgICAgICAgICRkYXRhWydtYXRjaF9pZCddID0kdHJhZGVbJ2lkJ107DQogICAgICAgICAgICAgICAgJHJlc3VsdD1NKCdjMmNfdHJhZGUnKS0+YWRkKCRkYXRhKTsNCiAgICAgICAgICAgICAgICBpZigkcmVzdWx0KXsNCiAgICAgICAgICAgICAgICAgICAgTSgiYzJjX3RyYWRlIiktPndoZXJlKCdpZD0nLiRpZCktPnNldERlYygncmVzaWR1ZScsJG51bWJlcik7ICAgICAgICAvL+iuoeeul+WJqeS9meiuouWNlemHjw0KICAgICAgICAgICAgICAgICAgICAkbWFyY2hpZCA9IE0oImMyY190cmFkZSIpLT53aGVyZSgnaWQ9JyAuICRpZCktPmdldEZpZWxkKCdtYXRjaF9pZCcpOw0KICAgICAgICAgICAgICAgICAgICAkbWFyY2hpZCA9ICRtYXJjaGlkIC4gJHJlc3VsdCAuICIsIjsNCiAgICAgICAgICAgICAgICAgICAgTSgiYzJjX3RyYWRlIiktPndoZXJlKCdpZD0nIC4gJGlkKS0+c2V0RmllbGQoJ21hdGNoX2lkJywgJG1hcmNoaWQpOw0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+c3VjY2Vzcygn6K6i5Y2V5Yy56YWN5oiQ5YqfJywnL2MyYy9pbmRleCcpOw0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+ZXJyb3IoJ+iuouWNleWMuemFjeWksei0pScpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgIH0NCiAgICAvL+aTjeS9nOWNluWHuuiuouWNlSANCiAgIHB1YmxpYyBmdW5jdGlvbiBzZWxsYWMoKXsNCg0KDQogICAgaWYgKCF1c2VyaWQoKSkgew0KICAgICAgICByZWRpcmVjdCgnLyNsb2dpbicpOw0KICAgIH0NCiAgICANCiAgICAkbnVtYmVyID0gMTAwOyAgICAgICAgICAgICAgICAgICAgICAgICAvL+W9k+WJjeeUqOaIt+S5sOWFpeaVsOmHj+iOt+W+lw0KICAgICR1aWQgPSB1c2VyaWQoKTsgICAgICAgICAgICAgICAgICAgICAgLy/lvZPliY3nlKjmiLdJRA0KICAgICRzZWxsaWQgPSBJKCdnZXQuc2VsbGlkJyk7ICAgICAgICAgICAgICAvL+WNluWutklEDQogICAgJGlkID0gSSgnZ2V0LmlkJyk7ICAgICAgICAgICAgICAgICAgICAvL+iuouWNlUlEDQoNCiAgICAkdHJhZGUgPSBNKCdjMmNfdHJhZGUnKS0+d2hlcmUoImlkPSIgLiAkaWQpLT5maW5kKCk7DQogICAgJHVjb2luID0gTSgndXNlcl9jb2luJyktPndoZXJlKCJ1c2VyaWQ9IiAuICR1aWQpLT5nZXRGaWVsZCgndXNkdCcpOw0KDQoNCiAgICBpZiAoJHVpZCA9PSAkc2VsbGlkKSB7DQogICAgICAgICR0aGlzLT5lcnJvcigi5LiN6IO95oqi6LSt6Ieq5bex55qE6K6i5Y2VIik7DQogICAgICAgIGV4aXQ7DQogICAgfQ0KICAgIGlmICgkdHJhZGVbJ21pbm51bSddIDw9ICR0cmFkZVsncmVzaWR1ZSddKSB7ICAgICAgICAgICAgLy9taW5udW3mnIDlsI/miJDkuqTph48gICAvL3Jlc2lkdWXorqLljZXliankvZnmiJDkuqTph48NCg0KICAgICAgICBpZiAoJG51bWJlciA8ICR0cmFkZVsnbWlubnVtJ10pIHsNCiAgICAgICAgICAgICR0aGlzLT5lcnJvcign5pyA5L2O5oiQ5Lqk6YeR6aKd5Li6JyAuICR0cmFkZVsnbWlubnVtJ10pOw0KICAgICAgICAgICAgZXhpdDsNCiAgICAgICAgfQ0KDQogICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKCRudW1iZXIgIT0gJHRyYWRlWydyZXNpZHVlJ10pIHsNCiAgICAgICAgICAgICR0aGlzLT5lcnJvcign6K6i5Y2V5oiQ5Lqk5pWw6YeP5pyA5L2O5Li6JyAuICR0cmFkZVsncmVzaWR1ZSddKTsNCiAgICAgICAgICAgIGV4aXQ7DQogICAgICAgIH0NCiAgICB9DQogICAgLyppZigkdHJhZGVbJ2lzX3BheSddPT0xIG9yICR0cmFkZVsnaXNfbG9jayddPT0xKXsNCiAgICAgICAgJHRoaXMtPmVycm9yKCLlhbbku5bnlKjmiLfmraPlnKjkuqTmmJPmraTorqLljZXvvIzor7fnqI3lkI7lho3or5UiKTsNCiAgICAgICAgICAgIGV4aXQ7DQogICAgfSovDQogICAgLy/nlJ/miJDlrZDorqLljZUNCiAgICAgJGNvZGVfbnVtPSJTIi5yYW5kKDEwMDAwMDAwMCw5OTk5OTk5OTkpLnRpbWUoKTsJDQogICAgJHVzZXIgPSBNKCd1c2VyJyktPndoZXJlKCdpZD0nIC4gJHVpZCktPmZpbmQoKTsNCiAgICAkZGF0YVsnbnVtYmVyJ10gPSAkY29kZV9udW07DQogICAgICRkYXRhWydtYXJrZXQnXT0ndXNkdCc7DQogICAgJGRhdGFbJ3NpZCddID0gJHRyYWRlWydzaWQnXTsNCiAgICAkZGF0YVsncHJpY2UnXSA9ICR0cmFkZVsncHJpY2UnXTsNCiAgICAkZGF0YVsnY3ByaWNlJ10gPSByb3VuZCgkdHJhZGVbJ3ByaWNlJ10gKiAkbnVtYmVyLDgpOw0KICAgICRkYXRhWydudW0nXSA9ICRudW1iZXI7DQogICAgJGRhdGFbJ3R5cGUnXSA9IDE7ICAgICAgICAgICAgICAgIC8v5Li76K6i5Y2V5Y2W5Ye6Mu+8jOWtkOiuouWNleS5sOWFpTENCiAgICAkZGF0YVsnaXNzaG9wJ10gPSAkdXNlclsnaXNzaG9wJ107DQogICAgJGRhdGFbJ3JlbWFyayddID0gIkMyQ+S6pOaYky3kuLvliqjkubDlhaUt5biC5Zy6VVNEVCI7DQogICAgJGRhdGFbJ2FkZHRpbWUnXSA9ICR0cmFkZVsnYWRkdGltZSddOw0KICAgICRkYXRhWydwYXl0aW1lJ10gPSB0aW1lKCk7DQogICAgJGRhdGFbJ2JpZCddID0gJHVpZDsNCiAgICAkZGF0YVsnaXNfcGF5J10gPSAxOw0KICAgICRkYXRhWydpc19jYW5jZWwnXSA9IDA7DQogICAgJGRhdGFbJ21hdGNoX2lkJ10gPSAkdHJhZGVbJ2lkJ107DQogICAgJHJlc3VsdCA9IE0oJ2MyY190cmFkZScpLT5hZGQoJGRhdGEpOw0KICAgIGlmICgkcmVzdWx0KSB7DQogICAgICAgDQogICAgICAgIE0oImMyY190cmFkZSIpLT53aGVyZSgnaWQ9JyAuICRpZCktPnNldERlYygncmVzaWR1ZScsICRudW1iZXIpOyAgICAgICAgLy/orqHnrpfliankvZnorqLljZXph48NCiAgICAgICAgJG1hcmNoaWQgPSBNKCJjMmNfdHJhZGUiKS0+d2hlcmUoJ2lkPScgLiAkaWQpLT5nZXRGaWVsZCgnbWF0Y2hfaWQnKTsNCiAgICAgICAgJG1hcmNoaWQgPSAkbWFyY2hpZCAuICRyZXN1bHQgLiAiLCI7DQogICAgICAgIE0oImMyY190cmFkZSIpLT53aGVyZSgnaWQ9JyAuICRpZCktPnNldEZpZWxkKCdtYXRjaF9pZCcsICRtYXJjaGlkKTsNCiAgICAgICAgJHRoaXMtPnN1Y2Nlc3MoJ+iuouWNleaKoui0reaIkOWKnycsICcvYzJjL2luZGV4Jyk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJHRoaXMtPmVycm9yKCforqLljZXmiqLotK3lpLHotKUnKTsNCiAgICB9DQp9DQogICAgLy/kuqTmmJPorqLljZUNCiAgICBwdWJsaWMgZnVuY3Rpb24gZGVhbCgpew0KICAgICAgICAgaWYgKCF1c2VyaWQoKSkgew0KICAgICAgICAgICAgcmVkaXJlY3QoJy8jbG9naW4nKTsNCiAgICAgICAgfQ0KDQogICAgICAgICRpZCA9IGludHZhbChJKCdnZXQuaWQnKSk7DQogICAgICAgICR1aWQ9dXNlcmlkKCk7DQoNCiAvLyAgICAgICAkaW5mbyA9IE0oJ290Y19sb2cnKS0+d2hlcmUoYXJyYXkoJ2lkJyA9PiAkaWQpKS0+ZmluZCgpOw0KICAvLyAgICAgICR1c2VyID0gTSgndXNlcicpLT53aGVyZShhcnJheSgnaWQnID0+ICRpbmZvWydtYXRjaGlkJ10pKS0+ZmluZCgpOw0KICAgICAgICAkdHJhZGUgPSBNKCJjMmNfdHJhZGUiKS0+d2hlcmUoJ2lkPScuJGlkKS0+ZmluZCgpOw0KICAgICAgICBpZiAoISR0cmFkZSkgew0KICAgICAgICAgICAgJHRoaXMtPmVycm9yKCfkuqTmmJPorqLljZXkuI3lrZjlnKjvvIEnKTsNCiAgICAgICAgfQ0KDQoJCSR0aGlzLT5hc3NpZ24oJ2MyYycsICR0cmFkZSk7DQoJCSR0aGlzLT5hc3NpZ24oJ3VpZCcsICR1aWQpOw0KICAgICAgICAkdGhpcy0+ZGlzcGxheSgpOyAgDQogICAgICAgIA0KICAgIH0NCiAgICANCiAgICBwdWJsaWMgZnVuY3Rpb24gY29uZmlybV9wYXkoKXsNCiAgICAgICAgIA0KICAgICAgICAgaWYgKCF1c2VyaWQoKSkgew0KICAgICAgICAgICAgcmVkaXJlY3QoJy8jbG9naW4nKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgJGlkPUkoJ3Bvc3QuaWQnKTsNCiAgICAgICAgaWYgKCFpc19udW1lcmljKCRpZCkpew0KICAgICAgICAgICAgJHRoaXMtPmVycm9yKCfml6DmlYjorqLljZUnKTsNCiAgICAgICAgICAgIGV4aXQ7DQogICAgICAgICAgICANCiAgICAgICAgfQ0KICAgICANCiAgICAgICAgJG1lc3NhZ2U9SSgncG9zdC5tZXNzYWdlJyk7DQogICAgICAgIA0KICAgICAgICAgJGltZyA9IEkoJ3Bvc3QuaW1nJyk7DQogICAgICAgIGlmICghJGltZykgew0KICAgICAgICAgICAgJHRoaXMtPmVycm9yKCfor7fkuIrkvKDmiZPmrL7lh63or4EnKTsNCiAgICAgICAgICAgIGV4aXQ7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICRyZXN1bHQ9TSgnYzJjX3RyYWRlJyktPndoZXJlKCJpZD0iLiRpZCktPmZpbmQoKTsNCiAgICAgICAgDQogICAgICAgIGlmKCRyZXN1bHQpew0KICAgICAgICAgICAgJGRhdGFbJ2ltZyddPSRpbWc7DQogICAgICAgICAgICAkZGF0YVsnbWVzc2FnZSddPSRtZXNzYWdlOw0KICAgICAgICAgICAgJGRhdGFbJ2lzX2dldCddPTE7DQogICAgICAgICAgICAkZGF0YVsnZ2V0dGltZSddPXRpbWUoKTsNCiAgICAgICAgICAgICRkYXRhWydpZCddPSRpZDsNCiAgICAgICAgICAgICRyZXM9TSgnYzJjX3RyYWRlJyktPnNhdmUoJGRhdGEpOw0KICAgICAgICAgICAgaWYoJHJlcyE9PWZhbHNlKXsNCiAgICAgICAgICAgICAgICAJJHRoaXMtPnN1Y2Nlc3MoJ+aJk+asvuaIkOWKnyznrYnlvoXljZblrrbnoa7orqTmlLbmrL4nKTsNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+c3VjY2Vzcygn56Gu6K6k5o+Q5Lqk5aSx6LSlJyk7DQogICAgICAgICAgICB9CQ0KICAgICAgICB9DQogICAgICAgIA0KICAgIH0NCiAgIA0KICAgIC8v5LiK5Lyg5Lqk5piT5Yet6K+BDQogICAgcHVibGljIGZ1bmN0aW9uIHVwaW1nKCkNCiAgICB7DQogICAgICAgIGlmICghdXNlcmlkKCkpIHsgICAgICAgICAgICANCiAgICAgICAgICAgICR0aGlzLT5lcnJvcign6K+35YWI55m75b2V77yBJyk7DQogICAgICAgIH0NCg0KICAgICAgICAkdXBsb2FkID0gbmV3IFxUaGlua1xVcGxvYWQoKTsNCiAgICAgICAgJHVwbG9hZC0+bWF4U2l6ZSA9IDIwNDgwMDA7DQogICAgICAgICR1cGxvYWQtPmV4dHMgPSBhcnJheSgnanBnJywgJ2dpZicsICdwbmcnLCAnanBlZycpOw0KICAgICAgICAkdXBsb2FkLT5yb290UGF0aCA9ICcuL1VwbG9hZC9pZGNhcmQvJzsNCiAgICAgICAgJHVwbG9hZC0+YXV0b1N1YiA9IGZhbHNlOw0KICAgICAgICAkaW5mbyA9ICR1cGxvYWQtPnVwbG9hZCgpOw0KDQogICAgICAgIGlmICghJGluZm8pIHsvLyDkuIrkvKDplJnor6/mj5DnpLrplJnor6/kv6Hmga8NCi8vICAgICAgICAgICAgJHRoaXMtPmVycm9yKCR1cGxvYWQtPmdldEVycm9yKCkpOw0KICAgICAgICAgICAgJHRoaXMtPmVycm9yKCflm77niYfkuIrkvKDlpLHotKUnKTsNCiAgICAgICAgfSBlbHNlIHsvLyDkuIrkvKDmiJDlip8NCiAgICAgICAgICAgIGZvcmVhY2ggKCRpbmZvIGFzICRmaWxlKSB7DQogICAgICAgICAgICAgICAgJHBhdGggPSAkZmlsZVsnc2F2ZVBhdGgnXSAuICRmaWxlWydzYXZlbmFtZSddOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBlY2hvICRwYXRoOw0KDQogICAgICAgIH0NCiAgICAgICAgZXhpdCgpOw0KICAgIH0NCiAgICANCiAgICAgcHVibGljIGZ1bmN0aW9uIGNvbmZpcm1fZ2V0KCl7IA0KICAgICAgICAgDQogICAgICAgIGlmICghdXNlcmlkKCkpIHsNCiAgICAgICAgcmVkaXJlY3QoJy8jbG9naW4nKTsNCiAgICAgICAgfQ0KCQkkdWlkPXVzZXJpZCgpOw0KCQkkaWQ9SSgncG9zdC5pZCcpOw0KCQkkaXNfdHM9SSgncG9zdC5pc190cycpOw0KCQkkd2hlcmVbJ2lkJ109JGlkOw0KCQkkd2hlcmVbJ2lzX3RzJ109JGlzX3RzOw0KCQkNCgkJaWYoJGlzX3RzPT0xKXsNCgkJICAgICRkYXRhWydpc190cyddPTE7DQoJCSAgICAkZGF0YVsnaXNfZG9uZSddPTA7DQoJCX1lbHNlew0KCQkgICAgJGRhdGFbJ2lzX3RzJ109MjsNCgkJICAgICRkYXRhWydpc19kb25lJ109MTsNCgkJICAgICRkYXRhWydlbmR0aW1lJ109dGltZSgpOw0KCQl9DQoJCQ0KCQkkcmVzPU0oJ2MyY190cmFkZScpLT53aGVyZSgkd2hlcmUpLT5maW5kKCk7DQoJCWlmKCRyZXMpew0KCQkgICAkcmVzPU0oJ2MyY190cmFkZScpLT53aGVyZSgkd2hlcmUpLT5zYXZlKCRkYXRhKTsNCgkJfQ0KICAgICB9ICAgICANCiAgIA0KICAgDQogDQoJDQoJDQoJICBwdWJsaWMgZnVuY3Rpb24gYzJjc2hvcCgkbWFya2V0ID0gJ2JiJywgJHR5cGUgPSBOVUxMLCAkc3RhdHVzID0gTlVMTCkNCgl7DQoJCWlmICghdXNlcmlkKCkpIHsNCgkJCXJlZGlyZWN0KCcvI2xvZ2luJyk7DQoJCX0NCg0KCQkkdWlkPXVzZXJpZCgpOw0KCQkNCgkJJHV1dSA9IE0oJ1VzZXInKS0+ZmluZCgkdWlkKTsNCgkJaWYoJHV1dVsnaXNzaG9wJ108MSkNCgkJew0KCQkJJHRoaXMtPmVycm9yKCfmgqjnm67liY3kuI3mmK/llYblrrbvvIzmmoLml6Dms5Xkvb/nlKjor6Xlip/og70nKTsNCgkJfQ0KCQkNCg0KCQlpZiAoISRtYXJrZXRfbGlzdFskbWFya2V0XSkgew0KCQkJLy8kbWFya2V0ID0gJE1hcmtldFswXVsnbmFtZSddOw0KCQl9DQoJCQ0KCQkNCg0KCQkkd2hlcmVbJ21hcmtldCddID0gJG1hcmtldDsNCg0KCQlpZiAoKCR0eXBlID09IDEpIHx8ICgkdHlwZSA9PSAyKSkgew0KCQkJJHdoZXJlWyd0eXBlJ10gPSAkdHlwZTsNCgkJfQ0KDQoJCWlmICgkc3RhdHVzID4wKSB7DQoJCQkkd2hlcmVbJ2NzdGF0dXMnXSA9ICRzdGF0dXM7DQoJCX0NCgkJDQoJCQ0KCQkNCgkJJHdoZXJlWydzaG9wX2lkJ10gPSAkdWlkOw0KCQkNCgkJJGMyY19sb2cgPSBNKCdjMmNfdHJhZGUnKS0+d2hlcmUoJHdoZXJlKS0+c2VsZWN0KCk7DQoNCgkNCgkJJHRoaXMtPmFzc2lnbignYzJjX2xvZycsICRjMmNfbG9nKTsNCg0KCQkkd2hlcmVbJ3VzZXJpZCddID0gdXNlcmlkKCk7DQoJCSR0aGlzLT5hc3NpZ24oJ21hcmtldCcsICRtYXJrZXQpOw0KCQkkdGhpcy0+YXNzaWduKCd0eXBlJywgJHR5cGUpOw0KCQkkdGhpcy0+YXNzaWduKCdzdGF0dXMnLCAkc3RhdHVzKTsNCgkJJE1vYmxlID0gTSgnVHJhZGUnKTsNCgkJJGNvdW50ID0gJE1vYmxlLT53aGVyZSgkd2hlcmUpLT5jb3VudCgpOw0KCQkkUGFnZSA9IG5ldyBcVGhpbmtcUGFnZSgkY291bnQsIDE1KTsNCgkJJFBhZ2UtPnBhcmFtZXRlciAuPSAndHlwZT0nIC4gJHR5cGUgLiAnJnN0YXR1cz0nIC4gJHN0YXR1cyAuICcmbWFya2V0PScgLiAkbWFya2V0IC4gJyYnOw0KCQkkc2hvdyA9ICRQYWdlLT5zaG93KCk7DQoJCSRsaXN0ID0gJE1vYmxlLT53aGVyZSgkd2hlcmUpLT5vcmRlcignaWQgZGVzYycpLT5saW1pdCgkUGFnZS0+Zmlyc3RSb3cgLiAnLCcgLiAkUGFnZS0+bGlzdFJvd3MpLT5zZWxlY3QoKTsNCg0KCQlmb3JlYWNoICgkbGlzdCBhcyAkayA9PiAkdikgew0KCQkJJGxpc3RbJGtdWydudW0nXSA9ICR2WydudW0nXSAqIDE7DQoJCQkkbGlzdFska11bJ3ByaWNlJ10gPSAkdlsncHJpY2UnXSAqIDE7DQoJCQkkbGlzdFska11bJ2RlYWwnXSA9ICR2WydkZWFsJ10gKiAxOw0KCQl9DQoNCgkJJHRoaXMtPmFzc2lnbignbGlzdCcsICRsaXN0KTsNCgkJJHRoaXMtPmFzc2lnbigncGFnZScsICRzaG93KTsNCgkJJHRoaXMtPmRpc3BsYXkoKTsNCgl9DQoJDQoJDQoJDQoJcHVibGljIGZ1bmN0aW9uIG1tc2V0KCRpZCA9IE5VTEwpDQoJew0KCQkkaW5mbz1NKCdjMmNfdHJhZGUnKS0+d2hlcmUoJ2lkPScuJGlkKS0+ZmluZCgpOw0KCQkNCgkJJHRoaXMtPmFzc2lnbignaW5mbycsJGluZm8pOw0KCQkNCgkJaWYoJGluZm9bJ3Nob3BfaWQnXSl7DQoJCQkkdXNlcj1NKCd1c2VyJyktPndoZXJlKCdpZD0nLiRpbmZvWydzaG9wX2lkJ10pLT5maW5kKCk7DQoJCQkkdGhpcy0+YXNzaWduKCd1c2VyJywkdXNlcik7DQoJCX0NCgkJDQoJCQ0KCQkkdGhpcy0+ZGlzcGxheSgpOw0KCX0NCgkNCgkJcHVibGljIGZ1bmN0aW9uIG1tc2V0c2hvcCgkaWQgPSBOVUxMKQ0KCXsNCgkJJGluZm89TSgnYzJjX3RyYWRlJyktPndoZXJlKCdpZD0nLiRpZCktPmZpbmQoKTsNCgkJDQoJCSR0aGlzLT5hc3NpZ24oJ2luZm8nLCRpbmZvKTsNCgkJDQoJCWlmKCRpbmZvWydzaG9wX2lkJ10pew0KCQkJJHVzZXI9TSgndXNlcicpLT53aGVyZSgnaWQ9Jy4kaW5mb1snc2hvcF9pZCddKS0+ZmluZCgpOw0KCQkJJHRoaXMtPmFzc2lnbigndXNlcicsJHVzZXIpOw0KCQl9DQoJCQ0KCQkkdGhpcy0+ZGlzcGxheSgpOw0KCX0NCgkJDQoJcHVibGljIGZ1bmN0aW9uIEh1aWt1YW4oJGlkID0gTlVMTCkNCgl7DQoJCSRjbD1NKCdjMmNfdHJhZGUnKTsNCgkJJGluZm89JGNsLT53aGVyZSgiaWQ9JGlkIiktPmZpbmQoKTsNCgkJDQoJCWlmKCgkaW5mb1snY3N0YXR1cyddPT0xKSYmKCRpbmZvWydzdGF0J109MSkpew0KCQkJJGluZm89JGNsLT53aGVyZSgnaWQ9Jy4kaWQpLT5zYXZlKFsnY3N0YXR1cyc9PjIsJ3BheXRpbWUnPT50aW1lKCldKTsNCgkJCSR0aGlzLT5zdWNjZXNzKCfmj5DkuqTmiJDlip8nKTsNCgkJCS8vZWNobyAnc3VjY2Vzcyc7DQoJCX0NCgkJLyoNCgkJZWxzZWlmKCgkaW5mb1snY3N0YXR1cyddPT0xKSYmKCRpbmZvWydzdGF0J109Mikpew0KCQkJJGluZm89JGNsLT53aGVyZSgnaWQ9Jy4kaWQpLT5zYXZlKFsnc3RhdHVzJz0+MywnZW5kdGltZSc9PnRpbWUoKV0pOw0KCQkJJHRoaXMtPnN1Y2Nlc3MoJ+aPkOS6pOaIkOWKnycpOw0KCQl9DQoJCSovDQoJCQ0KCQkkdGhpcy0+ZGlzcGxheSgpOw0KCX0NCgkNCgkJDQoJDQoJCQ0KCQ0KCS8qCXB1YmxpYyBmdW5jdGlvbiBjb25maXJtX2dldCgkaWQgPSBOVUxMKSAgICANCgl7DQoJCSRjbD1NKCdjMmNfdHJhZGUnKTsNCgkJJGluZm89JGNsLT53aGVyZSgiaWQ9JGlkIiktPmZpbmQoKTsNCgkJDQoJCWlmKCRpbmZvWydjc3RhdHVzJ109PTMpew0KCQkkY2wtPndoZXJlKCdpZD0nLiRpZCktPnNhdmUoWydjc3RhdHVzJz0+NCwnZW5kdGltZSc9PnRpbWUoKV0pOw0KCQkJDQoJCSR1dSA9IE0oJ3VzZXJfY29pbicpLT53aGVyZSgidXNlcmlkPSIuJGluZm9bJ3VzZXJpZCddKS0+ZmluZCgpOw0KCQkkdW5ldyA9IHJvdW5kKCR1dVsnYmInXSskaW5mb1snbnVtJ10sOCk7DQoJCSRzcyA9IE0oJ3VzZXJfY29pbicpLT53aGVyZSgidXNlcmlkPSIuJGluZm9bJ3Nob3BfaWQnXSktPmZpbmQoKTsNCgkJJHNuZXcgPSByb3VuZCgkc3NbJ2JiJ10rJGluZm9bJ251bSddLDgpOw0KCQkNCgkJaWYoJGluZm9bJ3R5cGUnXT09MSkNCgkJew0KCQkJTSgndXNlcl9jb2luJyktPndoZXJlKCJ1c2VyaWQ9Ii4kaW5mb1sndXNlcmlkJ10pLT5zYXZlKFsnYmInPT4kdW5ld10pOw0KCQl9DQoJCWlmKCRpbmZvWyd0eXBlJ109PTIpDQoJCXsNCgkJCU0oJ3VzZXJfY29pbicpLT53aGVyZSgidXNlcmlkPSIuJGluZm9bJ3Nob3BfaWQnXSktPnNhdmUoWydiYic9PiRzbmV3XSk7DQoJCX0NCgkJCQ0KCQkJDQoJCQkNCgkJCSR0aGlzLT5zdWNjZXNzKCfmj5DkuqTmiJDlip8nKTsNCgkJCS8vZWNobyAnc3VjY2Vzcyc7DQoJCX0NCgkJDQoJCQ0KCQkNCgkJJHRoaXMtPmRpc3BsYXkoKTsNCgl9DQoJKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gY2hleGlhbygkaWQgPSBudWxsKSAgICAvL+aSpOmUgOiuouWNlQ0KICAgIHsNCiAgICAgICAgDQogICAgICAgICRvbCA9IE0oJ2MyY190cmFkZScpOw0KICAgICAgICAkaW5mbyA9ICRvbC0+d2hlcmUoWydpZCcgPT4gJGlkXSktPmZpbmQoKTsNCgkJJG51bT1yb3VuZCgkaW5mb1snbnVtJ10qJHByaWNlLDgpOw0KICAgICAgICBpZiAoISRpbmZvKSB7DQogICAgICAgICAgICAkdGhpcy0+ZXJyb3IoJ+S6pOaYk+iuouWNleS4jeWtmOWcqO+8gScpOw0KICAgICAgICB9DQovLzDmnKrljLnphY3vvIwx5bey5Yy56YWN77yMMuW3suaJk+asvu+8jDPlt7Llj5HotKfvvIw05bey5a6M5oiQ77yMLTHlj5bmtogNCiAgICAgICAgaWYgKCgkaW5mb1snY3N0YXR1cyddICE9IDEpICYmICgkaW5mb1snY3N0YXR1cyddICE9IDQpKSB7DQogICAgICAgICAgICAkdGhpcy0+ZXJyb3IoJ+iuouWNleW3sue7j+WkhOeQhui/h++8gScpOw0KICAgICAgICB9DQoJCQ0KCQkNCgkJJGhiYj1NKCd1c2VyX2NvaW4nKS0+d2hlcmUoJ2lkPScuJGluZm9bJ3Nob3BfaWQnXSktPmZldGNoU3FsKHRydWUpLT5zZXRJbmMoJ2JiJywkbnVtKTtkdW1wKCRoYmIpO2RpZTsNCgkJDQoJCQ0KDQogICAgICAgIGlmICgkaW5mb1snc3RhdHVzJ10gPT0gMCkgew0KCQkJDQoJCQkNCiAgICAgICAgICAgIA0KCQkJJHJzID0gJG9sLT53aGVyZShhcnJheSgnaWQnID0+ICRpZCkpLT5zYXZlKGFycmF5KCdzdGF0dXMnID0+IC0xKSk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJHJzKSB7DQogICAgICAgICAgICAkdGhpcy0+c3VjY2Vzcygn5pON5L2c5oiQ5YqfJyk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkdGhpcy0+ZXJyb3IoJ+aTjeS9nOWksei0pe+8gScpOw0KICAgICAgICB9DQogICAgfQ0KICAgIHB1YmxpYyBmdW5jdGlvbiBvcmRlcnNlbGwoKQ0KICAgIHsNCiAgICAgICAgaWYgKCF1c2VyaWQoKSkgew0KICAgICAgICAgICAgcmVkaXJlY3QoJy8jbG9naW4nKTsNCiAgICAgICAgfQ0KDQogICAgICAgICRpZCA9IGludHZhbChJKCdnZXQuaWQnKSk7DQoNCiAgICAgICAgJGluZm8gPSBNKCdjMmNfbG9nJyktPndoZXJlKGFycmF5KCdpZCcgPT4gJGlkKSktPmZpbmQoKTsNCiAgICAgICAgJHVzZXIgPSBNKCd1c2VyJyktPndoZXJlKGFycmF5KCdpZCcgPT4gJGluZm9bJ21hdGNoaWQnXSkpLT5maW5kKCk7DQogICAgICAgICRyZW1hcmsgPSBNKCdvdGNfdHJhZGUnKS0+d2hlcmUoYXJyYXkoJ2lkJyA9PiAkaW5mb1sndHJhZGVpZCddKSktPmZpbmQoKTsNCg0KICAgICAgICBpZiAoISRpbmZvKSB7DQogICAgICAgICAgICAkdGhpcy0+ZXJyb3IoJ+S6pOaYk+iuouWNleS4jeWtmOWcqO+8gScpOw0KICAgICAgICB9DQogICAgICAgICR0eXBlcz0kaW5mb1sndHlwZSddPT0xPyfkubDlhaUnOifljZblh7onOw0KDQogICAgICAgICR0aGlzLT5hc3NpZ24oJ21vYmlsZScsICR1c2VyWydtb2JsZSddKTsNCiAgICAgICAgJHRoaXMtPmFzc2lnbigndHlwZXMnLCAkdHlwZXMpOw0KICAgICAgICAkdGhpcy0+YXNzaWduKCduYW1lcycsIHN0cnRvdXBwZXIoJGluZm9bJ21hcmtldCddKSk7DQogICAgICAgICR0aGlzLT5hc3NpZ24oJ2luZm8nLCAkaW5mbyk7DQogICAgICAgICR0aGlzLT5hc3NpZ24oJ3JlbWFyaycsICRyZW1hcmtbJ3JlbWFyayddKTsNCiAgICAgICAgJHRoaXMtPmRpc3BsYXkoKTsNCiAgICB9DQoNCiAgICAvL+aciemXrumimA0KICAgIHB1YmxpYyBmdW5jdGlvbiBtbXNldDEoKQ0KICAgIHsNCiAgICAgICAgJGlkID0gaW50dmFsKEkoJ2dldC5pZCcpKTsNCg0KICAgICAgICBpZiAoJGlkKSB7DQogICAgICAgICAgICAkaW5mbyA9IE0oJ2MyY19sb2cnKS0+d2hlcmUoYXJyYXkoJ2lkJyA9PiAkaWQpKS0+ZmluZCgpOw0KICAgICAgICAgICAgaWYgKCEkaW5mbykgew0KICAgICAgICAgICAgICAgICR0aGlzLT5lcnJvcign5Lqk5piT6K6i5Y2V5LiN5a2Y5Zyo77yBJyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICR1c2VyPU0oJ3VzZXInKS0+d2hlcmUoImlkPSIuJGluZm9bJ21hdGNoaWQnXSktPmZpbmQoKTsNCiAgICAgICAgICAgICR0aGlzLT5hc3NpZ24oJ25hbWVzJywgc3RydG91cHBlcigkaW5mb1snbWFya2V0J10pKTsNCiAgICAgICAgICAgICR0aGlzLT5hc3NpZ24oJ2luZm8nLCAkaW5mbyk7DQogICAgICAgICAgICAkdGhpcy0+YXNzaWduKCdzMScsICR1c2VyWyd1c2VyaWQnXSk7DQogICAgICAgICAgICAkdGhpcy0+YXNzaWduKCdzMicsICR1c2VyWydtb2JsZSddKTsNCiAgICAgICAgfQ0KICAgICAgICAkdGhpcy0+ZGlzcGxheSgpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBmdW5jdGlvbiB1cHNob3AoKXsNCiAgICAgICAgJGlkPXVzZXJpZCgpOw0KICAgICAgICAkdXNlciA9IE0oJ3VzZXInKS0+d2hlcmUoJ2lkPScgLiAkaWQpLT5maW5kKCk7DQoJCQ0KCQlpZigkdXNlclsnYWxpcGF5J109PSIiKXsNCgkJCSR0aGlzLT5lcnJvcign6K+35YWI6K6+572uQzJD5pSv5LuY5ZKM5pS25qy+5pa55byPJywnL290Yy9vdGNwYXknKTsNCgkJfQ0KDQogICAgICAgIGlmICgkdXNlclsnaXNzaG9wJ10gPT0gMSl7DQogICAgICAgICAgICAkdGhpcy0+ZXJyb3IoJ+W3suWKoOWFpeWVhuaItycpOw0KICAgICAgICB9ZWxzZWlmICgkdXNlclsnaXNzaG9wJ10gPT0gMCkgew0KICAgICAgICAgICAgJHVwID0gTSgndXNlcicpLT53aGVyZSgnaWQ9JyAuICRpZCktPnNhdmUoWydpc3Nob3AnID0+IC0xXSk7DQogICAgICAgICAgICAkdGhpcy0+c3VjY2Vzcygn55Sz6K+35oiQ5YqfJyk7DQogICAgICAgIH0NCg0KDQogICAgfQ0KCQkNCglwdWJsaWMgZnVuY3Rpb24gYWRkMSgpDQogICAgew0KICAgICAgICBpZiAoIXVzZXJpZCgpKSB7DQoJCQlyZWRpcmVjdCgnLyNsb2dpbicpOw0KCQl9DQoJCQ0KICAgICAgICAkdWlkID0gdXNlcmlkKCk7DQogICAgICAgICR1c2VyPU0oJ3VzZXInKS0+d2hlcmUoImlkPSIuJHVpZCktPmZpZWxkKCdpc3Nob3AsaWRjYXJkYXV0aCcpLT5maW5kKCk7DQogICAgaWYgKCR1c2VyKSB7ICAgDQogICAgICAgICRiYW5rPU0oJ3VzZXJfYmFuaycpLT53aGVyZSgndXNlcmlkPScuJHVpZCktPmZpbmQoKTsNCiAgICAgICAgaWYoJHVzZXJbJ2lkY2FyZGF1dGgnXT09MCl7DQoJCQkkdGhpcy0+ZXJyb3IoJ+WunuWQjeiupOivgeWwmuacqumAmui/h++8jOivt+iupOivgeWQjuWGjeadpeOAgicsJy91c2VyL25hbWVhdXRoJyw1KTsNCiAgICAgICAgfQ0KDQoJCWlmKCEkYmFuayl7DQoJCQkkdGhpcy0+ZXJyb3IoJ+ivt+WFiOiuvue9rkMyQ+aUr+S7mOWSjOaUtuasvuaWueW8jycsJy91c2VyL2JhbmsnKTsNCgkJfQ0KDQogICAgICAgIGlmIChDKCdtYXJrZXQnKVskbWFya2V0XVsnYmVnaW50cmFkZSddKSB7DQogICAgICAgICAgICAkYmVnaW50cmFkZSA9IEMoJ21hcmtldCcpWyRtYXJrZXRdWydiZWdpbnRyYWRlJ107DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkYmVnaW50cmFkZSA9ICIwMDowMDowMCI7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoQygnbWFya2V0JylbJG1hcmtldF1bJ2VuZHRyYWRlJ10pIHsNCiAgICAgICAgICAgICRlbmR0cmFkZSA9IEMoJ21hcmtldCcpWyRtYXJrZXRdWydlbmR0cmFkZSddOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgJGVuZHRyYWRlID0gIjIzOjU5OjU5IjsNCiAgICAgICAgfQ0KDQogICAgICAgICR0cmFkZV9iZWdpbl90aW1lID0gc3RydG90aW1lKGRhdGUoIlktbS1kIikgLiAiICIgLiAkYmVnaW50cmFkZSk7DQogICAgICAgICR0cmFkZV9lbmRfdGltZSA9IHN0cnRvdGltZShkYXRlKCJZLW0tZCIpIC4gIiAiIC4gJGVuZHRyYWRlKTsNCiAgICAgICAgJGN1cl90aW1lID0gdGltZSgpOw0KDQogICAgICAgIGlmICgkY3VyX3RpbWUgPCAkdHJhZGVfYmVnaW5fdGltZSB8fCAkY3VyX3RpbWUgPiAkdHJhZGVfZW5kX3RpbWUpIHsNCiAgICAgICAgICAgICR0aGlzLT5lcnJvcign5b2T5YmN5biC5Zy656aB5q2i5Lqk5piTLOS6pOaYk+aXtumXtOS4uuavj+aXpScgLiAkYmVnaW50cmFkZSAuICctJyAuICRlbmR0cmFkZSk7DQogICAgICAgIH0NCiAgICAgICAgdW5zZXQoJGN1cl90aW1lKTsNCiAgICAgICAgDQogICAgICAgICAgICAkbnVtID0gSSgncG9zdC5udW0nKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKCRudW0gPT0gbnVsbCkgJHRoaXMtPmVycm9yKCfor7floavlhpnmlbDph48nKTsNCiAgICAgICAgICAgIGlmICghaXNfbnVtZXJpYygkbnVtKSBvciAkbnVtPDApICR0aGlzLT5lcnJvcign6K+35aGr5YaZ5q2j56Gu55qE5pWw6YePJyk7DQoNCiAgICAgICAgICAgICRwcmljZSA9IEkoJ3Bvc3QucHJpY2UnKTsNCiAgICAgICAgICAgIGlmICgkcHJpY2UgPT0gbnVsbCApICR0aGlzLT5lcnJvcign6K+35aGr5YaZ5Lu35qC8Jyk7DQogICAgICAgICAgICBpZiAoIWlzX251bWVyaWMoJHByaWNlKSBvciAkcHJpY2U8MCkgJHRoaXMtPmVycm9yKCfor7floavlhpnmraPnoa7nmoTku7fmoLwnKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYoJHVzZXJbJ2lzc2hvcCddPT0xKXsgICAgICAgICAgICAvL+WVhuWutuiHquWumuS5ieacgOWwj+aIkOS6pOmHjw0KICAgICAgICAgICAgICAgICRtaW5udW09SSgncG9zdC5taW5udW0nKTsNCiAgICAgICAgICAgICAgICBpZigkbWlubnVtPT1udWxsICkgJHRoaXMtPmVycm9yKCfor7floavlhpnmnIDlsI/miJDkuqTmlbDph48nKTsNCiAgICAgICAgICAgICAgICBpZighaXNfbnVtZXJpYygkbWlubnVtKSBvciAkbWlubnVtPDAgb3IgJG1pbm51bT4kbnVtKSAkdGhpcy0+ZXJyb3IoJ+ivt+Whq+WGmeato+ehrueahOaIkOS6pOaVsOmHjycpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgJHR5cGUgPSBJKCdwb3N0LnR5cGUnKTsNCgkJCSR0b3RhbCA9IHJvdW5kKCRudW0qJHByaWNlLDgpOw0KICAgICAgICAgICAgaWYgKCR0eXBlID09IDIpIHsNCiAgICAgICAgICAgICAgICAvL+aPkuWFpeWNluWHuuiusOW9lXRyYWRlDQoJCSAgICAJJHVjb2luPU0oJ3VzZXJfY29pbicpLT53aGVyZSgndXNlcmlkPScuJHVpZCktPmZpZWxkKCd1c2R0JyktPmZpbmQoKTsNCgkJICAgIAkkaW50ZXJlc3Q9MDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/osIPnlKhDMkPlkI7lj7Dorr7nva7kuqTmmJPliKnmga8NCgkJCQlpZiAoJHVjb2luWyd1c2R0J108KCR0b3RhbCskaW50ZXJlc3QpKSANCgkJCQl7DQoJCQkJCSR0aGlzLT5lcnJvcignVVNEVOS9memineS4jei2s++8jOaaguaXoOazleWNluWHuicpOw0KCQkJCQlleGl0Ow0KCQkJCX0NCgkJCQl1bnNldCgkdWNvaW4pOw0KCQkJCSRjb2RlX251bT0iUyIucmFuZCgxMDAwMDAwMDAsOTk5OTk5OTk5KS50aW1lKCk7DQogICAgICAgICAgICAgICAgJGRhdGE9YXJyYXkoDQoJCQkJJ3NpZCcgPT4gJHVpZCwgDQoJCQkJJ251bWJlcic9PiRjb2RlX251bSwgICAgICAgICAgICAvL+e8luWPtw0KCQkJCSdtYXJrZXQnID0+ICd1c2R0JywNCgkJCQkncHJpY2UnID0+ICRwcmljZSwgICAgICAgICAgICAgICANCgkJCQknY3ByaWNlJyA9PiAkdG90YWwsICAgICAgICAgICAgIC8v5oC75Lu3DQoJCQkJJ251bScgPT4gJG51bSwgDQoJCQkJJ3R5cGUnID0+ICR0eXBlLCANCgkJCQknaXNzaG9wJz0+JHVzZXJbJ2lzc2hvcCddLA0KCQkJCSdtaW5udW0nPT4kbWlubnVtLA0KCQkJCSdyZXNpZHVlJz0+JG51bSwgICAgICAgICAgICAgICAgICAgIC8v5Ymp5L2Z6K6i5Y2V6YePDQoJCQkvLwknc3RhdCcgPT4gMiwNCgkJCS8vCSdzdGF0dXMnID0+IDEsIA0KCQkJCSdhZGR0aW1lJyA9PnRpbWUoKSwNCgkJCQkncmVtYXJrJyA9PiJDMkPkuqTmmJMt5aeU5omY5Y2W5Ye6LeW4guWculVTRFQiLA0KCQkJCSdjc3RhdHVzJyA9PiAwLCAgICAgICAgICAgICAgICAgICAvLzDmnKrljLnphY3vvIwx5bey5Yy56YWN77yMMuW3suaJk+asvu+8jDPlt7Llj5HotKfvvIw05bey5a6M5oiQ77yMLTHlj5bmtogNCgkJCSAgICAnbWF0Y2hfaWQnID0+IiwiLCAgICAgICAgICAgICAgICAgIA0KCQkJICAgICdtYXRjaCc9PiR1aWQsICAgICAgICAgICAgICAgICAgIC8v5Li76K6i5Y2VDQoJCQkJJ2lzX3BheScgPT4gMCwgICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5Lqk5piTDQoJCQkJJ2lzX3NoaXAnID0+IDAsICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5Y+R6LSnDQoJCQkJJ2lzX2RvbmUnID0+IDAsICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5pS26LSn5a6M5oiQDQoJCSAgICAgICAgJ2lzX3RpbWVvdXQnPT4wLCAgICAgICAgICAgICAgICAgIC8v5piv5ZCm6LaF5pe2DQoJCSAgICAgICAgJ2lzX2xvY2snPT4wLCAgICAgICAgICAgICAgICAgICAgICAgLy/kuqTmmJPplIHlrpoNCgkJICAgICAgICAnaXNfY2FuY2VsJz0+MCwgICAgICAgICAgICAgICAgICAgLy/mmK/lkKbmkqTplIDorqLljZUNCgkJCQkpOw0KCQkJICAgICRyZXN1bHQ9TSgnYzJjX3RyYWRlJyktPmFkZCgkZGF0YSk7DQogICAgICAgICAgICAgICAgaWYgKCRyZXN1bHQpIHsNCgkJCQkJLy/miaPpmaRVU0RU5L2Z6aKdDQoJCQkJCU0oJ3VzZXJfY29pbicpLT53aGVyZSgidXNlcmlkPSIuJHVpZCktPnNldERlYygndXNkdCcsJHRvdGFsKTsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPnN1Y2Nlc3MoJ+aMguWNluiuouWNleaPkOS6pOaIkOWKnycpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLT5lcnJvcign5oyC5Y2W6K6i5Y2V5o+Q5Lqk5aSx6LSlJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlaWYgKCR0eXBlID09IDEpIHsNCgkJCSAgICAvL+aPkuWFpeS5sOWFpeiusOW9leihqHRyYWRlDQoJCQkgICAgJGNvZGVfbnVtPSJCIi5yYW5kKDEwMDAwMDAwMCw5OTk5OTk5OTkpLnRpbWUoKTsJDQogICAgICAgICAgICAgICAgJGRhdGE9YXJyYXkoDQoJCQkJJ21hcmtldCcgPT4gJ3VzZHQnLA0KCQkJCSdudW1iZXInPT4kY29kZV9udW0sICAgICAgICAgICAgLy/nvJblj7cNCgkJCQkncHJpY2UnID0+ICRwcmljZSwgDQoJCQkJJ2NwcmljZScgPT4gJHRvdGFsLA0KCQkJCSdudW0nID0+ICRudW0sIA0KCQkJCSd0eXBlJyA9PiAkdHlwZSwgDQoJCQkJJ2lzc2hvcCc9PiR1c2VyWydpc3Nob3AnXSwNCgkJCQknbWlubnVtJz0+JG1pbm51bSwNCgkJCQkncmVzaWR1ZSc9PiRudW0sDQoJCQkvLwknc3RhdCcgPT4gMSwNCgkJCS8vCSdzdGF0dXMnID0+IDIsIA0KCQkJCSdhZGR0aW1lJyA9PiB0aW1lKCksDQoJCQkJJ3JlbWFyaycgPT4iQzJD5Lqk5piTLeWnlOaJmOS5sOWFpS3luILlnLpVU0RUIiwNCgkJCSAgICAnY3N0YXR1cycgPT4gMCwgICAgICAgICAgICAgICAgICAgLy8w5pyq5Yy56YWN77yMMeW3suWMuemFje+8jDLlt7LmiZPmrL7vvIwz5bey5Y+R6LSn77yMNOW3suWujOaIkO+8jC0x5Y+W5raIDQoJCQkgICAgJ21hdGNoX2lkJyA9PiIsIiwgICAgICAgICAgICAgICAgICAvL+S4u+iuouWNlQ0KCQkJICAgICdtYXRjaCc9PiR1aWQsDQoJCQkJJ2lzX3BheScgPT4gMCwgICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5Lqk5piTDQoJCQkJJ2lzX3NoaXAnID0+IDAsICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5Y+R6LSnDQoJCQkJJ2lzX2RvbmUnID0+IDAsICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5pS26LSn5a6M5oiQDQoJICAgICAgICAgICAgJ2lzX3RpbWVvdXQnPT4wLCAgICAgICAgICAgICAgICAgIC8v5piv5ZCm6LaF5pe2DQoJICAgICAgICAgICAgJ2lzX2NhbmNlbCc9PjAsICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5pKk6ZSA6K6i5Y2VDQoJICAgICAgICAgICAgJ2lzX2xvY2snPT4wLCAgICAgICAgICAgICAgICAgICAgIC8v5Lqk5piT6ZSB5a6aDQoJCQkJJ2JpZCcgPT4gJHVpZCwgICAgICAgICAgICAgICAgICAgIC8v5Lmw5a62SUQgICANCgkJCQkpOw0KCQkJCSRyZXN1bHQ9TSgnYzJjX3RyYWRlJyktPmFkZCgkZGF0YSk7DQoJCQkJaWYgKCRyZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPnN1Y2Nlc3MoJ+S5sOWFpeiuouWNleaPkOS6pOaIkOWKnycpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLT5lcnJvcign5Lmw5YWl6K6i5Y2V5o+Q5Lqk5aSx6LSlJyk7DQogICAgICAgICAgICAgICAgfQ0KCQkJfQ0KCQkJDQoJCQkvKg0KCQkJew0KCQkJDQogICAgICAgICAgICAgICAgJGZpbmQgPSAkY2xtLT53aGVyZSgic3RhdHVzPTEgYW5kIHR5cGU9MiBhbmQgcHJpY2U8PSRwcmljZSBhbmQgbnVtPj0kbnVtIGFuZCB1c2VyaWQhPSR1aWQgYW5kIHMxPTAiKS0+c2VsZWN0KCk7Ly/mib5sb2forqLljZUNCg0KDQogICAgICAgICAgICAgICAgaWYgKCEkZmluZCkgJHRoaXMtPmVycm9yKCfmsqHmnInlkIjpgILnmoTorqLljZUnKTsNCg0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRmaW5kIGFzICR2KSB7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICRmaWRbXSA9ICR2WydpZCddOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAkZmlkcyA9ICRmaWRbYXJyYXlfcmFuZCgkZmlkLCAxKV07DQoNCiAgICAgICAgICAgICAgICAkc2VsbCA9ICRjbG0tPndoZXJlKCdpZD0nIC4gJGZpZHMpLT5maW5kKCk7Ly/ljLnphY3orqLljZUNCiAgICAgICAgICAgICAgICAkc2VsbHMxID0gJGNsbS0+d2hlcmUoJ2lkPScgLiAkc2VsbFsnaWQnXSktPnNhdmUoWydzMScgPT4gMV0pOw0KDQogICAgICAgICAgICAgICAgJHNlbGx0eXBlID0gJHNlbGxbJ3R5cGUnXSA9PSAxID8gJ+S5sOWFpScgOiAn5Y2W5Ye6JzsNCg0KICAgICAgICAgICAgICAgIGlmICgkbnVtID09ICRzZWxsWydudW0nXSkgew0KDQogICAgICAgICAgICAgICAgICAgIC8v5Lmw5aeU5omY6K6i5Y2VDQogICAgICAgICAgICAgICAgICAgICRidXl0ID0gJGN0bS0+YWRkKFsndXNlcmlkJyA9PiB1c2VyaWQoKSwgJ21hcmtldCcgPT4gJ3VzZHQnLCAncHJpY2UnID0+ICRwcmljZSwgJ2NwcmljZScgPT4gJHByaWNlICogJG51bSwgJ251bScgPT4gJG51bSwgJ3R5cGUnID0+ICR0eXBlLCAnc3RhdCcgPT4gMSwgJ3N0YXR1cycgPT4gMiwgJ2FkZHRpbWUnID0+ICRjdXJfdGltZSxdKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoISRidXl0KSAkdGhpcy0+ZXJyb3IoJ+aPkOS6pOWksei0pScpOw0KDQogICAgICAgICAgICAgICAgICAgIC8v5Lmw5Lqk5piT6K6i5Y2VDQogICAgICAgICAgICAgICAgICAgICRidXlsID0gJGNsbS0+YWRkKFsndXNlcmlkJyA9PiB1c2VyaWQoKSwgJ21hdGNoaWQnID0+ICRzZWxsWyd1c2VyaWQnXSwgJ3RyYWRlaWQnID0+ICRidXl0LCAncHBpZCcgPT4gJHNlbGxbJ2lkJ10sICdtYXJrZXQnID0+ICd1c2R0JywgJ3ByaWNlJyA9PiAkcHJpY2UsICdjcHJpY2UnID0+ICRwcmljZSAqICRudW0sICdudW0nID0+ICRudW0sICd0eXBlJyA9PiAkdHlwZSwgJ25hbWUnID0+ICdjMmMtYmLllYbmiLcnIC4gJHR5cGVzIC4gJ+S6pOaYkycsICdzdGF0JyA9PiAxLCAnc3RhdHVzJyA9PiAyLCAnYWRkdGltZScgPT4gJGN1cl90aW1lLCAnbXB0aW1lJyA9PiB0aW1lKCldKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoJGJ1eWwpew0KICAgICAgICAgICAgICAgICAgICAgICAgLy/kv67kuobljZbkuqTmmJPorrDlvZUNCiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxscyA9ICRjbG0tPndoZXJlKCdpZD0nIC4gJHNlbGxbJ2lkJ10pLT5zYXZlKFsnbWF0Y2hpZCcgPT4gdXNlcmlkKCksICdwcGlkJyA9PiAkYnV5bCwncHJpY2UnID0+ICRwcmljZSwgJ2NwcmljZScgPT4gJHByaWNlICogJG51bSwgJ251bScgPT4gJG51bSwgJ3N0YXR1cycgPT4gMiwnbXB0aW1lJyA9PiB0aW1lKCldKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxsdHM9JGN0bS0+d2hlcmUoJ2lkPScgLiAkc2VsbFsnaWQnXSktPnNhdmUoWydzdGF0dXMnPT4yXSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNlbGxzICYmICRzZWxsdHMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+c3VjY2Vzcygn5o+Q5Lqk5oiQ5YqfJyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYnV5bHJvbGxiYWsgPSAkY2xtLT53aGVyZSgnaWQ9JyAuICRidXlsKS0+c2F2ZShbJ3N0YXR1cycgPT4gLTFdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYnV5dHJvbGxiYWsgPSAkY3RtLT53aGVyZSgnaWQ9JyAuICRidXl0KS0+c2F2ZShbJ3N0YXR1cycgPT4gLTFdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsbGxzcm9sbGJhayA9ICRjdG0tPndoZXJlKCdpZD0nIC4gJHNlbGxbJ2lkJ10pLT5zYXZlKFsnc3RhdHVzJyA9PiAxXSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmVycm9yKCfmj5DkuqTlpLHotKUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICAkYnV5dHMgPSAkY3RtLT53aGVyZSgnaWQ9Jy4kYnV5dCktPnNhdmUoWydzdGF0dXMnPT4tMV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmVycm9yKCfmj5DkuqTlpLHotKUnKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgfSBlbHNlaWYgKCRudW0gPD0gJHNlbGxbJ251bSddKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgJGN1cm51bSA9ICRzZWxsWydudW0nXSAtICRudW07DQoNCiAgICAgICAgICAgICAgICAgICAgJGJ1eW5ld3QgPSAkY3RtLT5hZGQoWyd1c2VyaWQnID0+IHVzZXJpZCgpLCAnbWFya2V0JyA9PiAndXNkdCcsICdwcmljZScgPT4gJHByaWNlLCAnY3ByaWNlJyA9PiAkcHJpY2UgKiAkbnVtLCAnbnVtJyA9PiAkbnVtLCAndHlwZScgPT4gJHR5cGUsICdzdGF0JyA9PiAxLCAnc3RhdHVzJyA9PiAyLCAnYWRkdGltZScgPT4gJGN1cl90aW1lLF0pOw0KDQogICAgICAgICAgICAgICAgICAgICRidXluZXdsID0gJGNsbS0+YWRkKFsndXNlcmlkJyA9PiB1c2VyaWQoKSwgJ3RyYWRlaWQnID0+ICRidXluZXd0LCAncHBpZCcgPT4gJHNlbGxbJ2lkJ10sICdtYXJrZXQnID0+ICd1c2R0JywgJ3ByaWNlJyA9PiAkcHJpY2UsICdjcHJpY2UnID0+ICRwcmljZSAqICRudW0sICdudW0nID0+ICRudW0sICd0eXBlJyA9PiAkdHlwZSwgJ25hbWUnID0+ICdjMmMtdXNkdOWVhuaItycgLiAkdHlwZXMgLiAn5Lqk5piTJywgJ3N0YXQnID0+IDEsICdzdGF0dXMnID0+IDIsICdhZGR0aW1lJyA9PiAkY3VyX3RpbWUsICdtcHRpbWUnID0+IHRpbWUoKV0pOw0KDQogICAgICAgICAgICAgICAgICAgIGlmICgkYnV5bmV3dCAmJiAkYnV5bmV3bCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGxuZXcgPSAkY2xtLT5hZGQoWyd1c2VyaWQnID0+ICRzZWxsWyd1c2VyaWQnXSwgJ21hdGNoaWQnID0+IHVzZXJpZCgpLCAndHJhZGVpZCcgPT4gJHNlbGxbJ3RyYWRlaWQnXSwgJ3BwaWQnID0+ICRidXluZXdsLCAnbWFya2V0JyA9PiAndXNkdCcsICdwcmljZScgPT4gJHByaWNlLCAnY3ByaWNlJyA9PiAkcHJpY2UgKiAkbnVtLCAnbnVtJyA9PiAkbnVtLCAndHlwZScgPT4gJHNlbGxbJ3R5cGUnXSwgJ25hbWUnID0+ICdjMmMtdXNkdOWVhuaItycgLiAkc2VsbHR5cGUgLiAn5Lqk5piTJywgJ3N0YXQnID0+ICRzZWxsWydzdGF0J10sICdzdGF0dXMnID0+IDIsICdhZGR0aW1lJyA9PiAkY3VyX3RpbWUsICdtcHRpbWUnID0+IHRpbWUoKV0pO2VjaG8gJHNlbGxuZXc7DQogICAgICAgICAgICAgICAgICAgICAgICAkc2VsbGxvdz0kY2xtLT53aGVyZSgnaWQ9Jy4kc2VsbFsnaWQnXSktPnNhdmUoWydudW1kJz0+JG51bSwnbnVtJz0+JGN1cm51bSwnczEnPT4wXSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNlbGxuZXcgJiYgJHNlbGxsb3cpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYnV5bmV3bHM9JGNsbS0+d2hlcmUoJ2lkPScuJGJ1eW5ld2wpLT5mZXRjaFNxbCh0cnVlKS0+c2F2ZShbJ21hdGNoaWQnID0+ICRzZWxsbmV3XSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAkYnV5bmV3bHM7ZGllOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT5zdWNjZXNzKCfmj5DkuqTmiJDlip8nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRidXluZXd0cm9iaz0kY3RtLT53aGVyZSgnaWQ9Jy4kYnV5bmV3dCktPnNhdmUoWydzdGF0dXMnPT4tMV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRidXluZXdsdHJvYms9JGN0bS0+d2hlcmUoJ2lkPScuJGJ1eW5ld2wpLT5zYXZlKFsnc3RhdHVzJz0+LTFdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsbGxvd3JvYms9JGN0bS0+d2hlcmUoJ2lkPScuJHNlbGxbJ2lkJ10pLT5zYXZlKFsnc3RhdCc9PjBdKTsNCiAgICAgICAgICAgICAgI